"use strict";(self.webpackChunkpatreon_react_features=self.webpackChunkpatreon_react_features||[]).push([[9236],{574694:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(671893),r=n(921968);const a=function(e){const t=(0,i.useRef)(null),n=(0,i.useRef)(null),o="IntersectionObserver"in(0,r.ZP)(),a=(0,i.useMemo)((()=>{const i=()=>{var t,i;null!==n.current&&("hidden"===document.visibilityState?null===(t=e.logExit)||void 0===t||t.call(e,Date.now()-n.current):(null===(i=e.log)||void 0===i||i.call(e),n.current=Date.now()))};return o&&new IntersectionObserver((o=>{var r,a,l,s,c,d,m,u,p,g;o.length&&t.current&&(o[0].isIntersecting?(null===(r=e.log)||void 0===r||r.call(e),n.current=Date.now(),null===(m=document)||void 0===m||null===(u=m.addEventListener)||void 0===u||u.call(m,"visibilitychange",i),null===(p=document)||void 0===p||null===(g=p.addEventListener)||void 0===g||g.call(p,"pagehide",i)):null!==n.current&&(null===(a=e.logExit)||void 0===a||a.call(e,Date.now()-n.current),n.current=null,null===(l=document)||void 0===l||null===(s=l.removeEventListener)||void 0===s||s.call(l,"visibilitychange",i),null===(c=document)||void 0===c||null===(d=c.removeEventListener)||void 0===d||d.call(c,"pagehide",i)))}))||void 0}),[o]);return(0,i.useEffect)((()=>(t.current&&(null==a||a.observe(t.current)),()=>null==a?void 0:a.disconnect())),[a]),o?i.createElement(l,{css:e.css,ref:t},e.children):i.createElement(l,{css:e.css},e.children)},l=o.ZP.div.withConfig({componentId:"sc-5rbuj9-0"})(["",""],(e=>e.css))},917136:(e,t,n)=>{n.d(t,{B:()=>o,M:()=>r});var i=n(538124);const o={DOMAIN:"Crowdcast",EDUCATION_PAGE:"Education Page",OAUTH:"Oauth",UPLOAD_COVER_PHOTO:"Upload Cover Photo",LIVESTREAM_PREVIEW_MODAL:"Livestream Preview Modal",MAKE_A_POST_EDITOR:"Make a Post Editor",SCHEDULED:"Scheduled",PUBLISH_MODAL:"Publish Modal",CLICKED_GET_STARTED:"Clicked Get Started",CLICKED_LEARN_MORE:"Clicked Learn More",CLICKED_UPLOAD_COVER_PHOTO:"Clicked Upload Cover Photo",CLICKED_REMOVE_COVER_PHOTO:"Clicked Remove Cover Photo",CLICKED_CREATE_LIVESTREAM:"Clicked Create Livestream",CLICKED_OPEN_LIVESTREAM:"Clicked Open Livestream",CLICKED_CONTINUE_TO_CROWDCAST:"Clicked Continue to Crowdcast",CLICKED_TEST_LIVE_STREAM:"Clicked Test Livestream",CLICKED_LIVESTREAM_GUIDE:"Clicked Livestream Guide",CLICKED_SUPPORT:"Clicked Support",CLICKED_PROMOTE:"Clicked Promote",CLICKED_LATER:"Clicked Later",CLICKED_MANAGE_ON_CROWDCAST:"Clicked Manage on Crowdcast",RENDERED:"Rendered",CLICKED:"Clicked",ERROR:"Error",SUCCESS:"Success"};function r(e,t){const n={domain:o.DOMAIN,title:e.join(" : ")};t&&(n.info=t),(0,i.Kz)(n)}},468254:(e,t,n)=>{n.d(t,{J:()=>c});var i=n(836808),o=n.n(i),r=n(24357),a=n(768990),l=n(422232);const s="patreon_device_id";function c(e){if(!e)return void(0,a.KE)("logExperimentExposure: data is undefined");const t=function(e){return e.unitId?e.unitId:"device_id"===e.unitType?o().get(s):void 0}(e);if(!t)return void(0,a.KE)("logExperimentExposure: missing unitId",{experimentId:null==e?void 0:e.experimentId});!function(e){if("device_id"===e.unitType){const t=o().get(s);t?e.unitId?e.unitId!==t?(0,r.t)("experiment_exposure.device_id.client_exposure.mismatch",{experimentName:e.experimentName,variantName:e.variantName}):(0,r.t)("experiment_exposure.device_id.client_exposure.match",{experimentName:e.experimentName,variantName:e.variantName}):(0,r.t)("experiment_exposure.device_id.empty_exposure_device_id",{experimentName:e.experimentName,variantName:e.variantName}):(0,r.t)("experiment_exposure.device_id.empty_cookie_device_id",{experimentName:e.experimentName,variantName:e.variantName})}}(e);const n={experiment_id:null==e?void 0:e.experimentId,experiment_name:null==e?void 0:e.experimentName,variant_id:null==e?void 0:e.variantId,variant_name:null==e?void 0:e.variantName,unit_id:t,unit_type:null==e?void 0:e.unitType,assignment_ts:null==e?void 0:e.assignmentTs,assignment_id:null==e?void 0:e.assignmentId,override_id:null==e?void 0:e.overrideId,campaign_id:null==e?void 0:e.campaignId};(0,l.b)(n)}},526548:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Creator Stats : Posts : Insights : Clicked Show Patrons by Type",e)}},91822:(e,t,n)=>{n.d(t,{M:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Creator Stats : Posts : Insights : Clicked View More Insights",e)}},669182:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Creator Stats : Posts : Insights : Load More Patrons",e)}},422232:(e,t,n)=>{n.d(t,{b:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Patreon Experiment : Exposure : Registered",e)}},140816:(e,t,n)=>{n.d(t,{q:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Instant Access : Clicked Edited Like",e)}},142169:(e,t,n)=>{n.d(t,{E:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Media : Ended Playback",e)}},539110:(e,t,n)=>{n.d(t,{t:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Media : Paused Playback",e)}},138934:(e,t,n)=>{n.d(t,{B:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Media : Toggled Playback",e)}},42838:(e,t,n)=>{n.d(t,{y:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Patron Cards : Hovered",e)}},109343:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Patron Cards : Navigated to User Profile",e)}},942908:(e,t,n)=>{n.d(t,{x:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Patron Cards : Opened Message Modal",e)}},970260:(e,t,n)=>{n.d(t,{r:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Actions : Confirmed Pin",e)}},411688:(e,t,n)=>{n.d(t,{m:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Actions : Confirmed Unpin",e)}},373516:(e,t,n)=>{n.d(t,{R:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post : Duration",e)}},636097:(e,t,n)=>{n.d(t,{o:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post : Impression",e)}},444607:(e,t,n)=>{n.d(t,{s:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post In Feed : Clicked Share Button",e)}},693059:(e,t,n)=>{n.d(t,{m:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post In Feed : Clicked Share",e)}},362209:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post In Feed : Display List of Likes",e)}},949734:(e,t,n)=>{n.d(t,{X:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post In Feed : Load More Comments",e)}},609478:(e,t,n)=>{n.d(t,{s:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Level Suspension : Post Suspension Banner : Clicked Resolve",e)}},991459:(e,t,n)=>{n.d(t,{F:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Level Suspension : Post Suspension Banner : Landed",e)}},795435:(e,t,n)=>{n.d(t,{l:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Page : Clicked Share Button",e)}},96076:(e,t,n)=>{n.d(t,{j:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Page : Clicked Share",e)}},672409:(e,t,n)=>{n.d(t,{y:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Page : Display List of Likes",e)}},793674:(e,t,n)=>{n.d(t,{B:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Page : Edited Like",e)}},909022:(e,t,n)=>{n.d(t,{m:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Page : Load More Comments",e)}},582556:(e,t,n)=>{n.d(t,{D:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Share Modal : Dismissed",e)}},180995:(e,t,n)=>{n.d(t,{r:()=>o});var i=n(538124);function o(e){i.yN.logTypedEvent("Post Share Modal : Landed",e)}},116240:(e,t,n)=>{n.d(t,{C:()=>r,_:()=>o});var i=n(538124);const o={DOMAIN:"Poll",VOTED:"Voted",LANDED:"Landed"},r=(0,i.iZ)(o.DOMAIN)},970778:(e,t,n)=>{n.d(t,{B:()=>o,H:()=>r});var i=n(538124);const o={DOMAIN:"Post In Feed",SOURCE_HOME:"home",SOURCE_CREATOR_PAGE:"creator",CLICKED_SHARE_BUTTON:"Clicked Share Button",SHARE:"Share",LIKE:"Like",UNLIKE:"Unlike",EXPANDED:"Clicked Continue Reading"},r=(0,i.iZ)(o.DOMAIN)},719807:(e,t,n)=>{n.d(t,{U:()=>o,s:()=>r});var i=n(538124);const o={DOMAIN:"Post",CLICKED_DATETIME:"Clicked Datetime Stamp",CLICKED_TITLE:"Clicked Title",CLICKED_TO_GET_ACCESS:"Clicked Get Access",CLICKED_UNLOCKED_EA_POST:"Clicked Unlocked Early Access Post",CLICKED_WATCH_LIVESTREAM:"Clicked Watch Livestream",CLICKED_TEASER:"Clicked Teaser",SCROLLED_GALLERY_THUMBNAILS:"Scrolled Gallery Thumbnails",OPENED_LIGHTBOX:"Opened Lightbox"},r=(0,i.iZ)(o.DOMAIN)},41601:(e,t,n)=>{n.d(t,{Y:()=>p,Z:()=>v});var i=n(999007),o=n(623338),r=n(445488),a=n(298178),l=n(575810),s=n(140085),c=n(768379),d=n(667294),m=n(692330),u=n(459854);const p=c.z.div.withConfig({componentId:"sc-1s3sqqu-0"})(["position:absolute;border-radius:50%;height:100%;width:100%;background-color:rgba(0,0,0,0.25);opacity:",";transition:opacity 100ms cubic-bezier(0.17,0.17,0,1);"],(e=>e.showAvatarShadow?1:0)),g=c.z.div.withConfig({componentId:"sc-1s3sqqu-1"})(["position:relative;border-radius:50%;height:24px;width:24px;&:hover{cursor:pointer;}"]),h=c.z.div.withConfig({componentId:"sc-1s3sqqu-2"})(["position:absolute;border-radius:50%;background-color:white;bottom:-2px;right:-2px;height:14px;width:14px;"]),f=c.z.div.withConfig({componentId:"sc-1s3sqqu-3"})(["position:absolute;bottom:3.5px;right:-2px;height:12px;width:12px;"]),v=e=>{let{campaignName:t,campaignAvatarPhotoUrl:n,commentIsLikedByCreatorIconColor:c=o.T.global.brand.patreon}=e;const v=(0,m.b)(),b=(0,u.dD)(),[y,x]=(0,d.useState)(!1);return d.createElement(r.u,{textContent:(0,i.translate)(v,"Liked by {campaignName}",{campaignName:t},"Campaign has liked a particular comment"),preferredPlacement:b?"bottom":"right"},d.createElement(g,{"data-tag":"endorsement-wrapper",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1)},d.createElement(p,{"data-tag":"endorsement-avatar-shadow",showAvatarShadow:y}),d.createElement(a.q,{size:a.q.Size["24px"],src:n}),d.createElement(h,null),d.createElement(f,null,d.createElement(l.H,{size:s.J.Size.Xxxs,color:c}))))}},531139:(e,t,n)=>{n.d(t,{Z:()=>k});var i,o,r=n(999007),a=n(29097),l=n(140085),s=n(179302),c=n(298178),d=n(218659),m=n(398032),u=n(831001),p=n(354355),g=n(45697),h=n.n(g),f=n(667294),v=n(201216),b=n(418093),y=n(917136),x=n(719807),C=n(166130),E=n(113253);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w.apply(this,arguments)}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let k=(0,b.xJ)("isHovering","setIsHovering",!1)((o=class extends f.Component{constructor(){super(...arguments),P(this,"handleClickWatch",(()=>{(0,y.M)([x.U.DOMAIN,x.U.CLICKED_WATCH_LIVESTREAM])})),P(this,"handleRemoveImage",(e=>{e.preventDefault(),(0,y.M)([y.B.UPLOAD_COVER_PHOTO,y.B.CLICKED_REMOVE_COVER_PHOTO]),this.props.onRemoveImage()})),P(this,"renderEditPhoto",(()=>{const{acceptedFileTypes:e,hasCustomImage:t,isHovering:n,onAddImage:i}=this.props,o=f.createElement(E.x1,{accept:e,type:"file","data-tag":"editPhoto",onChange:i});return f.createElement(E.Aw,{hidden:!n,onClick:t&&this.handleRemoveImage},t?f.createElement(a.H,{color:l.J.Stroke.Light,size:l.J.Size.Xxs}):o,t?f.createElement(s.x,{align:s.x.Align.Center,color:s.x.Color.Light,size:s.x.Size.Sm,uppercase:!0,weight:s.x.Weight.Bold},"Remove"):f.createElement(s.x,{align:s.x.Align.Center,color:s.x.Color.Light,size:s.x.Size.Sm,uppercase:!0,weight:s.x.Weight.Bold},"Replace Photo"))})),P(this,"renderAvatarSection",(()=>{const{isEditing:e,src:t,url:n}=this.props,i=f.createElement("a",{href:n,"data-tag":"editPhoto"},e&&this.renderEditPhoto(),f.createElement(c.q,{border:!0,size:{xs:c.q.Size.Md,sm:c.q.Size.Lg},src:t})),o={b:{xs:!1,sm:!0},borderStrokeWidth:"5px",cornerRadius:d.x.CornerRadius.Circle,position:d.x.Position.Relative,display:d.x.Display.InlineBlock};return f.createElement(d.x,{alignContent:d.x.AlignContent.FlexStart,alignItems:d.x.AlignItems.FlexStart,display:d.x.Display.Flex,flexDirection:d.x.FlexDirection.Row,flexWrap:d.x.FlexWrap.NoWrap,justifyContent:d.x.JustifyContent.Center},f.createElement(d.x,w({},o,{p:1,mr:2}),f.createElement(d.x,w({},o,{p:2}),i)))})),P(this,"renderButtonSection",(()=>{const{url:e}=this.props;return f.createElement(d.x,{alignContent:d.x.AlignContent.FlexStart,alignItems:d.x.AlignItems.FlexStart,display:d.x.Display.InlineBlock,flexDirection:d.x.FlexDirection.Row,flexWrap:d.x.FlexWrap.NoWrap,justifyContent:d.x.JustifyContent.Center},f.createElement(E.W4,{className:"mv-md",disabled:!e},f.createElement(m.z,{loggerId:"CrowdcastLivestreamPreview-watch-the-livestream",color:m.z.Color.TertiaryInverse,disabled:!e,href:e,onClick:this.handleClickWatch,size:{xs:"sm",sm:"mdsm"},target:m.z.Target.Blank},"Watch the livestream")),f.createElement(E.CQ,null,f.createElement(s.x,{align:s.x.Align.Center,color:s.x.Color.Light,el:s.x.Element.Div,size:s.x.Size.Sm},f.createElement(u.n,{color:l.J.Stroke.Light}),"  Powered by Crowdcast")))}))}render(){const{setIsHovering:e,src:t}=this.props,n=f.createElement(d.x,{fluidHeight:!0,fluidWidth:!0,mt:0,position:d.x.Position.Absolute,pl:2,pt:2},f.createElement(d.x,{alignContent:d.x.AlignContent.FlexStart,alignItems:d.x.AlignItems.FlexStart,display:d.x.Display.Flex,flexDirection:d.x.FlexDirection.Row,flexWrap:d.x.FlexWrap.NoWrap,fluidHeight:!0,justifyContent:d.x.JustifyContent.FlexStart},f.createElement(p.J,{display:{xs:p.J.Display.Block},xs:4,sm:5,alignSelf:p.J.AlignSelf.Center},f.createElement(E.Tw,null,this.renderAvatarSection())),f.createElement(p.J,{xs:7,sm:6,alignSelf:p.J.AlignSelf.Center},f.createElement(E.Tw,null,this.renderButtonSection()))));return f.createElement(d.x,{backgroundColor:d.x.BackgroundColor.Dark,overflow:d.x.Overflow.Hidden,onMouseEnter:()=>e(!0),onMouseLeave:()=>e(!1),position:d.x.Position.Relative},n,f.createElement(v.default,{once:!0,offset:C.ir},f.createElement(E.Xd,{src:t})))}},P(o,"contextType",r.LocaleContext),P(o,"propTypes",{acceptedFileTypes:h().string,hasCustomImage:h().bool,isEditing:h().bool,onAddImage:h().func,onRemoveImage:h().func,src:h().string,url:h().string,isHovering:h().bool,setIsHovering:h().func}),P(o,"defaultProps",{hasCustomImage:!1,isEditing:!1}),i=o))||i},113253:(e,t,n)=>{n.d(t,{Aw:()=>l,CQ:()=>s,Tw:()=>c,W4:()=>m,Xd:()=>a,x1:()=>d});var i=n(768379),o=n(623338);const r="20px",a=i.z.div.withConfig({componentId:"sc-1qdd4ci-0"})(["background-position:center;background-image:url('","');padding:",";margin:0 -",";filter:blur(",");background-size:cover;overflow:hidden;width:100%;padding-bottom:38%;opacity:0.4;"],(e=>e.src),r,r,r),l=i.z.div.withConfig({componentId:"sc-1qdd4ci-1"})(["margin:",";position:absolute;top:0;right:0;bottom:0;left:0;background:",";border-radius:",";cursor:pointer;border:4px solid white;display:flex;flex-direction:column;justify-content:center;align-items:center;",";"],(e=>e.theme.units.getValues(2)),o.T.global.constant.blackSubtle.hover,"200px",(e=>e.hidden?"display: none":"")),s=i.z.div.withConfig({componentId:"sc-1qdd4ci-2"})(["opacity:0.7;"]),c=i.z.div.withConfig({componentId:"sc-1qdd4ci-3"})(["z-index:",";position:relative;"],(e=>e.theme.zIndex.Z_INDEX_1)),d=i.z.input.withConfig({componentId:"sc-1qdd4ci-4"})(["cursor:pointer;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%;z-index:",";"],(e=>e.theme.zIndex.Z_INDEX_1)),m=i.z.div.withConfig({componentId:"sc-1qdd4ci-5"})(["",";"],(e=>e.disabled?"cursor: not-allowed":""))},699456:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(768379).z.div.withConfig({componentId:"sc-e2oq97-0"})(["position:absolute;pointer-events:none;bottom:0;height:",";width:100%;",";"],(e=>e.height?`${e.height}rem`:e.theme.units.getValue(10)),(e=>`\n        background-image: linear-gradient(to bottom, transparent 0%, ${e.theme.colors[e.backgroundColor]} 100%);\n    `))},88380:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(768379),o=n(667294);function r(e){let{color:t="gray5",fullPageWidth:n=!1}=e;return o.createElement(a,{color:t,fullPageWidth:n})}const a=i.z.hr.withConfig({componentId:"sc-10b61rh-0"})(["border:0;height:1px;",";",";",";"],(e=>`\n      background: ${e.theme.colors[e.color]};\n    `),(e=>`\n       width: ${e.fullPageWidth?"100vw":""};\n    `),(e=>`\n       margin-left: ${e.fullPageWidth?"calc(50% - 50vw)":""};\n    `))},627488:(e,t,n)=>{n.d(t,{Z:()=>C});var i=n(218659),o=n(398032),r=n(882370),a=n(129666),l=n(540743),s=n(23279),c=n.n(s),d=n(45697),m=n.n(d),u=n(667294),p=n(201216),g=n(768379),h=n(719807),f=n(599757),v=n(879372),b=n(365359);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y.apply(this,arguments)}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C extends u.Component{constructor(e){super(e),x(this,"onGalleryScroll",(e=>{var t,n,i;null!=(null===(t=this.thumbnailGalleryRef)||void 0===t?void 0:t.current)&&this.setState({scrollPosition:null===(n=this.thumbnailGalleryRef)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.scrollLeft})})),x(this,"getClickEventData",(()=>{const{campaignId:e,postId:t,isOwner:n,currentUserPledgeCents:i}=this.props;return{campaign_id:e,post_id:t,is_owner:n,current_user_pledge_cents:i}})),x(this,"onOpenLightbox",(e=>{this.setState({isLightboxOpen:!0,selectedImageIndex:this.props.images.findIndex((t=>t.id===e.id))}),(0,h.s)({title:h.U.OPENED_LIGHTBOX,info:this.getClickEventData()})})),x(this,"onCloseLightbox",(()=>{this.setState({isLightboxOpen:!1,selectedImageIndex:void 0})})),x(this,"onNextImage",(()=>{const e=this.state.selectedImageIndex,t=e+1===this.props.images.length?0:e+1;this.setState({selectedImageIndex:t})})),x(this,"onPrevImage",(()=>{const e=this.state.selectedImageIndex,t=this.props.images.length,n=0===e?t-1:e-1;this.setState({selectedImageIndex:n})})),x(this,"scrollRight",(()=>{const e=Math.min(this.state.scrollPosition+500,this.rightScrollLimit);this.setState({scrollPosition:e}),this.thumbnailGalleryRef.current.scrollTo({top:0,left:e,behavior:"smooth"}),(0,h.s)({title:h.U.SCROLLED_GALLERY_THUMBNAILS,info:this.getClickEventData()})})),x(this,"scrollLeft",(()=>{const e=Math.max(this.state.scrollPosition-500,0);this.setState({scrollPosition:e}),this.thumbnailGalleryRef.current.scrollTo({top:0,left:e,behavior:"smooth"}),(0,h.s)({title:h.U.SCROLLED_GALLERY_THUMBNAILS,info:this.getClickEventData()})})),x(this,"renderTopImage",(()=>{const{images:e,isPublicContent:t,height:n,overflow:i}=this.props,o=e[0];return o&&u.createElement(p.default,y({once:!0,width:"100%",height:n},i&&{overflow:!0}),u.createElement(w,{"data-pin-nopin":!t||void 0,width:"100%",onClick:()=>this.onOpenLightbox(o),src:o.imageUrls.default}))})),x(this,"renderThumbnails",(()=>{const{images:e,isPublicContent:t,currentUserCanView:n,overflow:l}=this.props,s=n?e.slice(1):e.slice(1,8);if(0===s.length)return null;const c=this.state.scrollPosition>0,d=!this.rightScrollLimit||this.rightScrollLimit-this.state.scrollPosition>0;return u.createElement(I,null,c&&n&&u.createElement(i.x,{display:{xs:i.x.Display.None,md:i.x.Display.Block},position:i.x.Position.Absolute,css:{top:"50%",left:"15px",transform:"translateY(-50%)"}},u.createElement(o.z,{loggerId:"lightbox-previous-thumbnails",corners:"pill","data-tag":"lightbox-previous-thumbnails",icon:r.V,size:o.z.Size.Sm,variant:"insetWhite",onClick:this.scrollLeft})),u.createElement(k,{ref:this.thumbnailGalleryRef},s.map((e=>{const i=n?()=>this.onOpenLightbox(e):void 0;return e&&u.createElement(p.default,{once:!0,height:"120px",key:e.id,overflow:l},u.createElement(P,{"data-pin-nopin":!t||void 0,key:e.id,height:"120px",onClick:i,src:e.imageUrls.thumbnail}))}))),d&&n&&u.createElement(i.x,{display:{xs:i.x.Display.None,md:i.x.Display.Block},position:i.x.Position.Absolute,css:{top:"50%",right:"15px",transform:"translateY(-50%)"}},u.createElement(o.z,{loggerId:"lightbox-next-thumbnails",corners:"pill","data-tag":"lightbox-next-thumbnails",icon:a.H,size:o.z.Size.Sm,variant:"insetWhite",onClick:this.scrollRight})))})),this.state={isLightboxOpen:!1,scrollPosition:0},this.thumbnailGalleryRef=u.createRef(),this.debouncedOnGalleryScroll=c()(this.onGalleryScroll,500,{leading:!1,trailing:!0})}get rightScrollLimit(){return this.thumbnailGalleryRef.current&&this.thumbnailGalleryRef.current.scrollWidth-this.thumbnailGalleryRef.current.clientWidth}get selectedImage(){const{state:{selectedImageIndex:e},props:{images:t}}=this;return void 0!==e?t[e]:null}componentDidMount(){var e,t;null===(e=this.thumbnailGalleryRef)||void 0===e||null===(t=e.current)||void 0===t||t.addEventListener("scroll",this.debouncedOnGalleryScroll)}componentWillUnmount(){var e,t;null===(e=this.thumbnailGalleryRef)||void 0===e||null===(t=e.current)||void 0===t||t.removeEventListener("scroll",this.debouncedOnGalleryScroll)}render(){const{images:e,imgAlt:t,currentUserCanView:n,handleClick:o,height:r,darken:a,darkenRadial:s,isPatreonServedContent:c,isPublicContent:d,isPostPreview:m}=this.props,{selectedImageIndex:p}=this.state,g=e.length>1;if(!n){const d=()=>{o&&o()},p=e[0].imageUrls.default;return u.createElement(E,null,s&&u.createElement(_,{height:r}),u.createElement(l.E,{"data-tag":"image",alt:t,cropHeightRatio:3,onClick:d,src:p,height:r,darken:a,blur:!n&&!c||!n&&(0,b.n)("public")||m}),g&&u.createElement(i.x,{mt:.4},this.renderThumbnails()))}return u.createElement(i.x,null,this.renderTopImage(),this.renderThumbnails(),n&&u.createElement(v.Z,{originalImageSrc:(0,f.U)((()=>this.selectedImage.imageUrls.original)),imageCaption:(0,f.U)((()=>this.selectedImage.metadata.caption)),imageAlt:(0,f.U)((()=>this.selectedImage.metadata.altText)),imagePosition:g?`${p+1} / ${e.length}`:null,onNextImage:g?this.onNextImage:null,onPrevImage:g?this.onPrevImage:null,onClose:this.onCloseLightbox,isOpen:this.state.isLightboxOpen,isPublicContent:d}))}}x(C,"propTypes",{images:m().array,currentUserCanView:m().bool,handleClick:m().func,imgAlt:m().string.isRequired,height:m().oneOfType([m().number,m().string]),darken:m().bool,darkenRadial:m().bool,isPatreonServedContent:m().bool,isPublicContent:m().bool,overflow:m().bool,postId:m().string,campaignId:m().string,isOwner:m().bool,currentUserPledgeCents:m().number,isPostPreview:m().bool}),x(C,"defaultProps",{imgAlt:"",isPublicContent:!1,darkenRadial:!1});const E=g.z.div.withConfig({componentId:"sc-1h4huqp-0"})(["width:100%;"]),w=g.z.img.withConfig({componentId:"sc-1h4huqp-1"})(["cursor:zoom-in;"]),P=g.z.img.withConfig({componentId:"sc-1h4huqp-2"})(["cursor:zoom-in;border-right:4px solid white;"]),k=g.z.div.withConfig({componentId:"sc-1h4huqp-3"})(["max-height:120px;max-width:100%;display:flex;overflow-x:scroll;overflow-y:hidden;&::-webkit-scrollbar{display:none;}"]),I=g.z.div.withConfig({componentId:"sc-1h4huqp-4"})(["position:relative;max-height:120px;"]),_=g.z.div.withConfig({componentId:"sc-1h4huqp-5"})(["position:absolute;top:0;left:0;height:",";width:100%;background:radial-gradient(rgba(0,0,0,0.4),transparent);"],(e=>e.height))},847682:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(999007),o=n(575810),r=n(140085),a=n(454510),l=n(179302),s=n(45697),c=n.n(s),d=n(667294),m=n(768379),u=n(206213),p=n(382706);function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=m.z.button.withConfig({componentId:"sc-164jlc9-0"})(["align-items:flex-start;background:transparent;border:none;cursor:",";display:flex;height:100%;padding:0;width:auto;-webkit-appearance:none;&:focus{outline:none;}"],(e=>e.disabled?"default":"cursor")),f=m.z.div.withConfig({componentId:"sc-164jlc9-1"})(["height:0;margin:",";"],(e=>e.theme.units.getValues([-.375,0,0,.5])));class v extends d.Component{constructor(){super(...arguments),g(this,"state",{optimisticLikeInfo:null}),g(this,"shouldComponentUpdate",p.Z),g(this,"handleLikeClick",(()=>{if(this.props.loading)return;const e=this.isOptimisticallyUpdating()?this.state.optimisticLikeInfo.currentUserHasLiked:this.props.currentUserHasLiked,t=this.isOptimisticallyUpdating()?this.state.optimisticLikeInfo.likeCount:this.props.likeCount,{newCurrentUserHasLiked:n,newLikeCount:i}=this.getToggleLikeNewState(e,t);this.setState({optimisticLikeInfo:{currentUserHasLiked:n,likeCount:i}}),this.props.onLikeClick(e)})),g(this,"isOptimisticallyUpdating",(()=>null!==this.state.optimisticLikeInfo)),g(this,"getToggleLikeNewState",((e,t)=>{const n=!e;return{newCurrentUserHasLiked:n,newLikeCount:"number"==typeof t?t+(n?1:-1):t}})),g(this,"getLikeInfo",(()=>this.isOptimisticallyUpdating()?this.state.optimisticLikeInfo:this.props))}componentDidMount(){this.props.registerLikeOnMount&&!this.props.currentUserHasLiked&&this.handleLikeClick()}render(){const{isPreview:e,likedName:t,postAction:n}=this.props,{currentUserHasLiked:s,likeCount:c}=this.getLikeInfo(),m=s?(0,i.translate)(this.context,"Unlike {likedName}",{likedName:t},"Info text for the button to un-like a post"):(0,i.translate)(this.context,"Like {likedName}",{likedName:t},"Info text for the button to like a post");let p;return p=(0,u.Z)(c)?(0,i.translate)(this.context,"{likeLabel}. {likeCount, plural, one{# like} other{# likes}}",{likeLabel:m,likeCount:c},"Accessibility label to display the number of likes on a post"):m,d.createElement(h,{"data-tag":"like-button",disabled:e,"aria-label":p,"aria-checked":s,onClick:this.handleLikeClick},s?d.createElement(o.H,{size:n?r.J.Size.Sm:r.J.Size.Xs,color:r.J.Color.Primary}):d.createElement(a.G,{size:n?r.J.Size.Sm:r.J.Size.Xs,color:r.J.Color.Gray2}),c&&0!==c?d.createElement(f,null,d.createElement(l.x,{color:s?l.x.Color.Primary:l.x.Color.Gray1,size:l.x.Size.Sm,weight:l.x.Weight.Medium},d.createElement(i.Decimal,{value:c}))):null)}}g(v,"contextType",i.LocaleContext),g(v,"propTypes",{currentUserHasLiked:c().bool,likeCount:c().number,likedName:c().string.isRequired,onLikeClick:c().func.isRequired,loading:c().bool,postAction:c().bool,isPreview:c().bool,registerLikeOnMount:c().bool})},78060:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(768379),o=n(548184),r=n(90152),a=n(218659),l=n(179302),s=n(45697),c=n.n(s),d=n(667294),m=n(700199),u=n(921968);const p=i.z.div.withConfig({componentId:"sc-16mszam-0"})(["display:inline-block;margin-top:",";"," cursor:",";",";",";"],(e=>e.theme.units.getValue(.5)),(e=>e.isClickable?`border-bottom: 1px solid ${e.borderColor};`:""),(e=>e.isClickable?"pointer":"auto"),(e=>e.userSelect?`user-select: ${e.userSelect};`:""),(e=>e.minWidth&&`\n        min-width: ${e.theme.units.getValue(e.minWidth)};\n        display: flex;\n        justify-content: space-around;\n    `)),g={IconLockOutlined:o.Z,IconUnlockOutlined:r.V};function h(e){let{icon:t,iconColor:n,onClick:i,minWidth:o,size:r,text:s,userSelect:c,linkUrl:m}=e;return d.createElement(p,{minWidth:o,borderColor:n,userSelect:c,onClick:()=>{i&&i();const e=(0,u.ZP)();null!=e&&e.location&&m&&(e.location=m)},isClickable:!!i},d.createElement(a.x,{display:a.x.Display.InlineBlock,mr:.5},d.createElement(l.x,{el:l.x.Element.Div,color:n,lineHeight:1,weight:l.x.Weight.Bold},d.createElement(g[t],{size:r,stroke:n,"data-tag":t}))),d.createElement(l.x,{color:n,size:0,whiteSpace:l.x.WhiteSpace.NoWrap},s))}h.propTypes={icon:c().oneOf(["IconLockOutlined","IconUnlockOutlined"]),iconColor:c().string,linkUrl:c().string,minWidth:c().number,userSelect:c().string,onClick:c().func,size:c().oneOf(m.ID),text:c().oneOfType([c().string,c().object])}},790463:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(218659),o=n(328215),r=n(398032),a=n(8302),l=n(45697),s=n.n(l),c=n(667294),d=n(571995),m=n(692330);const u=e=>e.colors.system,p=e=>{let{canMessage:t,patronId:n,openMessageUserModal:l,morePopoverOpen:s,setMorePopoverOpen:p}=e;return(0,m.b)(),c.createElement(i.x,{pt:2,ph:2},c.createElement(i.x,{fluidWidth:!0},c.createElement(o.L,{replacePrimaryColor:u},t&&c.createElement(r.z,{loggerId:"PatronPopover-Footer-open-message-user-modal",fluid:!0,variant:r.z.Variant.Primary,icon:a.r,onClick:l,size:r.z.Size.Sm},c.createElement(d.YI,null)),!t&&c.createElement(r.z,{loggerId:"PatronPopover-Footer-view-profile",fluid:!0,variant:r.z.Variant.Primary,href:`/user?u=${n}`,size:r.z.Size.Sm},"View profile"))))};p.propTypes={patronId:s().string.isRequired,canMessage:s().bool,openMessageUserModal:s().func.isRequired,morePopoverOpen:s().bool,setMorePopoverOpen:s().func};const g=p},73739:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(999007),o=n(218659),r=n(633498),a=n(140085),l=n(179302),s=n(298178),c=n(623338),d=n(45697),m=n.n(d),u=n(667294),p=n(768379),g=n(692330),h=n(109343);const f=e=>{let{name:t,avatar:n,source:c,isPatron:d,joinDate:m,warning:p,patronId:f}=e;(0,g.b)();const b=new Date(m);return u.createElement(o.x,null,p&&u.createElement(v,null,u.createElement(r.e,{size:a.J.Size.Xs,color:a.J.Stroke.Transparent}),u.createElement(o.x,{ml:!0},u.createElement(l.x,{size:0,color:"light"},p))),u.createElement("a",{href:`/user?u=${f}`,onClick:()=>(0,h.e)({source:c})},u.createElement(o.x,{pt:2,verticalAlign:o.x.VerticalAlign.Middle},u.createElement(o.x,{alignContent:o.x.AlignContent.FlexStart,alignItems:o.x.AlignItems.Center,display:o.x.Display.Flex,flexDirection:o.x.FlexDirection.Row,flexWrap:o.x.FlexWrap.NoWrap,fluidWidth:!0,justifyContent:o.x.JustifyContent.FlexStart},u.createElement(s.q,{src:n,size:s.q.Size.Xs}),u.createElement(o.x,{pl:2,pr:2},u.createElement(l.x,{weight:"bold"},t),d?u.createElement(l.x,{el:"div",size:-1,uppercase:!0,weight:"bold"},"Your patron since ",u.createElement(i.DateTime,{type:"date",value:b,format:"mediumMonthWithYear"})):null)))))};f.propTypes={name:m().string.isRequired,source:m().string.isRequired,avatar:m().string.isRequired,isPatron:m().bool,joinDate:m().string,warning:m().oneOfType([m().string,m().bool]),patronId:m().string.isRequired};const v=p.z.div.withConfig({componentId:"sc-s3cxaa-0"})(["",";"],(e=>`\n  background-color: ${c.T.global.critical.action.default};\n  margin-left: ${e.theme.units.getValue(-3)};\n  margin-right: ${e.theme.units.getValue(-3)};\n  padding: ${e.theme.units.getValue(1)} ${e.theme.units.getValue(2)};\n  text-align: center;\n  display: flex;\n  justify-content: center;\n`)),b=f},594138:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(218659),o=n(179302),r=n(45697),a=n.n(r),l=n(667294),s=n(571995),c=n(313483),d=n(692330),m=n(465610);const u=e=>{let{currency:t,campaignLifetimeSupportCents:n,rewardTier:r,pledge:a}=e;const u=(0,d.b)(),p=(e,t,n,r)=>l.createElement(i.x,{alignContent:i.x.AlignContent.FlexStart,alignItems:i.x.AlignItems.FlexStart,display:i.x.Display.Flex,flexDirection:i.x.FlexDirection.Column,flexWrap:i.x.FlexWrap.NoWrap,justifyContent:i.x.JustifyContent.FlexStart,mr:r?1:0},l.createElement(o.x,{size:-1,uppercase:!0,weight:"bold"},e),l.createElement(o.x,{size:n,"data-tag":"patron-popover-value"},t));return l.createElement(i.x,{pt:3},r&&l.createElement(i.x,{pb:2},p(l.createElement(s.Hk,null),r,1,!0)),l.createElement(i.x,null,l.createElement(i.x,{alignContent:i.x.AlignContent.FlexStart,alignItems:i.x.AlignItems.FlexStart,display:i.x.Display.Flex,flexDirection:i.x.FlexDirection.Row,flexWrap:i.x.FlexWrap.NoWrap,justifyContent:i.x.JustifyContent.SpaceBetween},a&&p(l.createElement(l.Fragment,null,"Current Pledge"),(0,m.An)(a,u),1,!0),p(l.createElement(l.Fragment,null,"Lifetime support"),l.createElement(c.x,{value:n}),1))))};u.propTypes={currency:a().string,campaignLifetimeSupportCents:a().number,rewardTier:a().string,pledge:a().shape({amountCents:a().number,currency:a().string,cadence:a().number,campaign:a().shape({isMonthly:a().bool,payPerName:a().string}).isRequired})};const p=u},145764:(e,t,n)=>{n.d(t,{Z:()=>b});var i,o,r=n(963931),a=n(547718),l=n(202790),s=n(999007),c=n(45697),d=n.n(c),m=n(667294),u=n(50533),p=n(313483),g=n(599757),h=n(432645),f=n(405420);function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let b=(0,u.$j)((()=>(e,t)=>({payPerName:(0,r.yA)("currentUser.campaign.payPerName")(e)})))(i=(0,a.ZP)((e=>{let{patronId:t}=e;return{userPledgeData:{dataKey:`userPledgeData:${t}`,endpoint:(0,h.R)(`/user/${t}`,{include:["memberships.reward","memberships.latest_pledge.campaign"],fields:{user:["full_name","image_url"],member:["last_charge_status","full_name","pledge_amount_cents","campaign_lifetime_support_cents","pledge_relationship_start"],reward:["currency","title","amount_cents"],pledge:["amount_cents","cadence","currency"],campaign:["is_monthly","pay_per_name"]},"json-api-use-default-includes":!1}),fetchOnInit:!1,fetchOnce:!1}}}))((v(o=class extends m.Component{render(){const{patronId:e,canViewPopover:t}=this.props,n=this.props.nion.userPledgeData.data,i=(0,g.U)((()=>n.fullName)),o=(0,g.U)((()=>n.imageUrl));if(!t)return this.props.children;const{isLoading:r}=this.props.nion.userPledgeData.request;let a,{get:s}=this.props.nion.userPledgeData.actions;(r||(0,l.G)(n))&&(s=()=>{});let c,d,u,h,v,b,y,x=!1,C=!1;const E=(0,g.U)((()=>n.memberships[0]));if(E&&(v=(0,g.U)((()=>E.pledgeAmountCents)),b=(0,g.U)((()=>E.reward)),d=(0,g.U)((()=>b.currency)),c=(0,g.U)((()=>E.lastChargeStatus)),h=(0,g.U)((()=>E.campaignLifetimeSupportCents)),u=(0,g.U)((()=>E.pledgeRelationshipStart)),y=null==E?void 0:E.latestPledge),v>0){x=!0;const e=(0,g.U)((()=>b.title)),t=(0,g.U)((()=>b.amountCents));if(null===b)a=m.createElement(m.Fragment,null,"No reward");else if(e)a=e;else if(t){let e=m.createElement(p.x,{value:t}),n=this.props.payPerName;a=m.createElement(m.Fragment,null,e," or more per ",n)}}return"declined"===c&&(C=!0),m.createElement(f.Z,{getData:s,isLoading:r,name:i||this.props.fullName,avatar:o||this.props.avatar,pledgeAmountCents:v,currency:d,rewardTier:a,campaignLifetimeSupportCents:h,patronId:e,isPatron:x,isDeclined:!!C,joinDate:u,pledge:y},this.props.children)}},"contextType",s.LocaleContext),v(o,"propTypes",{canViewPopover:d().bool.isRequired,patronId:d().string.isRequired,fullName:d().string.isRequired,avatar:d().string.isRequired,children:d().node.isRequired,payPerName:d().string,nion:d().object}),i=o))||i)||i},405420:(e,t,n)=>{n.d(t,{Z:()=>S});var i,o,r,a,l,s,c=n(999007),d=n(218659),m=n(839301),u=n(378813),p=n(45697),g=n.n(p),h=n(667294),f=n(418093),v=n(505693),b=n(903415),y=n(856341),x=n(790463),C=n(73739),E=n(594138),w=n(942908),P=n(42838),k=n(133165);function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _={patronId:g().string.isRequired,name:g().string.isRequired,children:g().node,currency:g().string,avatar:g().string.isRequired,isPatron:g().bool,isDeclined:g().bool,joinDate:g().string,rewardTier:g().string,pledgeAmountCents:g().number,campaignLifetimeSupportCents:g().number,isLoading:g().bool,getData:g().func.isRequired,morePopoverOpen:g().bool,setMorePopoverOpen:g().func.isRequired,popoverOpen:g().bool,setPopoverOpen:g().func.isRequired,isMessageUserModalOpen:g().bool,setMessageUserModalOpen:g().func,nion:g().object,mallard:g().object,pledge:g().shape({amountCents:g().number,currency:g().string,cadence:g().number,campaign:g().shape({isMonthly:g().bool,payPerName:g().string}).isRequired})};let S=(i=(0,b.ZP)(y.Z),o=(0,f.xJ)("isMessageUserModalOpen","setMessageUserModalOpen",!1),r=(0,f.xJ)("morePopoverOpen","setMorePopoverOpen",!1),a=(0,f.xJ)("popoverOpen","setPopoverOpen",!1),(0,k.s)(l=i(l=o(l=r(l=a((s=class extends h.Component{constructor(){super(...arguments),I(this,"handleClickOutsidePopover",(()=>{const{popoverOpen:e,setPopoverOpen:t,setMorePopoverOpen:n,isMessageUserModalOpen:i}=this.props;e&&(i||t(!1),n(!1))})),I(this,"openMessageUserModal",(()=>{const{mallard:{messages:e},nion:{currentUser:t},patronId:n,name:i,avatar:o,setMessageUserModalOpen:r}=this.props;e.actions.set({conversationActive:!0,campaignId:t.data.campaign.id,selectedParticipantIds:[n],messageRecipients:[{id:n,fullName:i,imageUrl:o}]}),r(!0),(0,w.x)({source:this.source})})),I(this,"closeMessageUserModal",(()=>{this.props.setMessageUserModalOpen(!1)})),I(this,"delayedClosePopover",(()=>{const{morePopoverOpen:e}=this.props;this.cancelDelayedOpenPopover(),this.closeTimeout=window.setTimeout((()=>{if(!e)return this.handleClickOutsidePopover()}),450)})),I(this,"cancelDelayedClosePopover",(()=>{window.clearTimeout(this.closeTimeout)})),I(this,"cancelDelayedOpenPopover",(()=>{window.clearTimeout(this.openTimeout)})),I(this,"openPopover",(()=>{this.cancelDelayedOpenPopover(),this.props.getData(),this.openTimeout=window.setTimeout((()=>{(0,P.y)({source:this.source}),this.props.setPopoverOpen(!0)}),200)})),I(this,"renderMessageModal",(()=>this.props.isMessageUserModalOpen&&h.createElement(v.u,{importer:()=>Promise.all([n.e(7448),n.e(8243),n.e(1293),n.e(5926),n.e(5640),n.e(2629),n.e(1480),n.e(5815)]).then(n.bind(n,542184)),show:this.props.isMessageUserModalOpen,lockParticipants:!0,close:this.closeMessageUserModal})))}UNSAFE_componentWillReceiveProps(e){e.popoverOpen&&!this.props.popoverOpen&&this.props.getData()}render(){const{name:e,avatar:t,children:n,currency:i,isPatron:o,patronId:r,joinDate:a,isLoading:l,isDeclined:s,rewardTier:c,morePopoverOpen:p,setMorePopoverOpen:g,popoverOpen:f,pledgeAmountCents:v,campaignLifetimeSupportCents:b,pledge:y}=this.props;this.source=window.location.pathname.split("/")[1]||"unknown";const w=o||b>0,P=s&&h.createElement(h.Fragment,null,"Patron must update payment information"),k=h.createElement("div",{onMouseLeave:this.delayedClosePopover,onMouseEnter:this.cancelDelayedClosePopover},h.createElement(d.x,{p:2},h.createElement(C.Z,{warning:P,name:e,patronId:r,avatar:t,isPatron:o,source:this.source,joinDate:a}),l?h.createElement(d.x,{pt:2},h.createElement(m.T,{size:m.T.Size.Md})):h.createElement(d.x,null,o&&h.createElement(E.Z,{pledge:y,currency:i,rewardTier:c,pledgeAmountCents:v,campaignLifetimeSupportCents:b})),h.createElement(d.x,{bt:!0,mv:2,mh:-2},h.createElement(x.Z,{patronId:r,setMorePopoverOpen:g,morePopoverOpen:p,openMessageUserModal:this.openMessageUserModal,canMessage:w}))));return h.createElement(u.J,{hideArrow:!0,renderMode:"portal",content:k,minWidth:42,isOpen:f,onCloseRequest:()=>this.handleClickOutsidePopover(),preferredPlacement:u.J.Placement.AutoStart},(e=>{let{ref:t}=e;return h.createElement("div",{ref:t,onMouseOver:()=>{this.openPopover(),this.cancelDelayedClosePopover()},onFocus:()=>{this.openPopover(),this.cancelDelayedClosePopover()},onMouseLeave:this.delayedClosePopover},f&&this.renderMessageModal(),n)}))}},I(s,"contextType",c.LocaleContext),I(s,"propTypes",_),l=s))||l)||l)||l)||l)||l)},945028:(e,t,n)=>{n.d(t,{Sn:()=>x});var i=n(768379),o=n(623338),r=n(937720),a=n(825149),l=n(398032),s=n(285433),c=n(667294);const d=["children"],m=["children"],u=["children"],p=["children"];function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}i.z.a.withConfig({componentId:"sc-1e7zn9a-0"})(["color:",";text-decoration:none;"],o.T.global.content.regular.default),i.z.div.withConfig({componentId:"sc-1e7zn9a-1"})(["border-radius:",";box-shadow:0 0 0 "," transparent;cursor:pointer;position:relative;transition:background-color 300ms ease-in-out,box-shadow 300ms ease-in-out;&:hover{background-color:",";box-shadow:0 0 0 "," ",";}"],o.T.global.radius.sm,o.T.global.radius.lg,o.T.global.bg.baseAlt.default,o.T.global.radius.lg,o.T.global.bg.baseAlt.default);const f=e=>{let{children:t}=e,n=h(e,d);return c.createElement(r.I,g({},n,{as:"h2"}),t)},v=(0,i.i)(["font-size:"," !important;@media ","{font-size:"," !important;}"],o.T.global.fontSizes.heading.md,(e=>{let{theme:t}=e;return t.responsive.mediaForBreakpoint("sm")}),o.T.global.fontSizes.heading.lg),b=(0,i.i)(["font-size:"," !important;"],o.T.global.fontSizes.heading.md),y=(0,i.i)(["font-size:"," !important;@media ","{font-size:"," !important;}"],o.T.global.fontSizes.body.sm,(e=>{let{theme:t}=e;return t.responsive.mediaForBreakpoint("sm")}),o.T.global.fontSizes.body.md),x=((0,i.z)(f).withConfig({componentId:"sc-1e7zn9a-2"})(["",""],v),(0,i.z)((e=>{let{children:t}=e,n=h(e,p);return c.createElement(r.I,g({},n,{as:"div"}),t)})).withConfig({componentId:"sc-1e7zn9a-3"})(["font-size:"," !important;@media ","{font-size:"," !important;}"],o.T.global.fontSizes.heading.sm,(e=>{let{theme:t}=e;return t.responsive.mediaForBreakpoint("sm")}),o.T.global.fontSizes.heading.lg),(0,i.z)((e=>{let{children:t}=e,n=h(e,u);return c.createElement(r.I,g({},n,{as:"h3"}),t)})).withConfig({componentId:"sc-1e7zn9a-4"})(["color:",";svg{fill:",";}"],o.T.global.content.invertedMuted.default,o.T.global.content.invertedMuted.default),(0,i.z)(f).withConfig({componentId:"sc-1e7zn9a-5"})(["",""],b),(0,i.z)(f).withConfig({componentId:"sc-1e7zn9a-6"})(["font-size:"," !important;@media ","{font-size:"," !important;}"],o.T.global.fontSizes.heading.md,(e=>{let{theme:t}=e;return t.responsive.mediaForBreakpoint("sm")}),o.T.global.fontSizes.heading.lg),(0,i.z)(a.A).withConfig({componentId:"sc-1e7zn9a-7"})(["color:",";"],o.T.global.content.invertedMuted.default),(0,i.z)(l.z).withConfig({componentId:"sc-1e7zn9a-8"})(["",";width:max-content;border-color:",";color:",";svg{fill:",";}&:hover{border-color:",";}"],y,o.T.global.constant.white.default,o.T.global.constant.white.default,o.T.global.constant.white.default,o.T.global.constant.white.default));(0,i.z)((e=>{let{children:t}=e,n=h(e,m);return c.createElement(a.A,g({},n,{as:"div"}),t)})).withConfig({componentId:"sc-1e7zn9a-9"})(["",";"],y),(0,i.z)(s.h).withConfig({componentId:"sc-1e7zn9a-10"})(["",";"],y)},459657:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(999007),o=n(667294),r=n(692330);const a=e=>{let{date:t,dateFormat:n="medium",timeFormat:a="short"}=e;(0,r.b)();const l="string"==typeof t?new Date(t):t,s=o.createElement(i.DateTime,{type:"date",value:l,format:n}),c=o.createElement(i.DateTime,{type:"time",value:l,format:a});return o.createElement(o.Fragment,null,s," at ",c)}},671191:(e,t,n)=>{n.d(t,{t:()=>l});var i=n(218659),o=n(937720),r=n(825149),a=n(667294);const l=e=>{let{tag:t,value:n,secondaryValue:l,label:s}=e;return a.createElement(i.x,{"data-tag":t,flexGrow:.5},a.createElement(i.x,{display:i.x.Display.Flex,flexDirection:i.x.FlexDirection.Row,alignItems:i.x.AlignItems.Center,alignContent:i.x.AlignContent.Center,mb:.5},a.createElement(i.x,{"data-tag":`${t}-number`,mr:2},a.createElement(o.I,{as:"div",variant:"content"},n)),l&&a.createElement(r.A,{"data-tag":`${t}-secondary-number`,muted:!0,variant:"content"},l)),a.createElement(r.A,{as:"div","data-tag":`${t}-label`,muted:!0,variant:"content"},s))}},723664:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(999007),o=n(825149),r=n(173743),a=n(378813),l=n(218659),s=n(633498),c=n(667294),d=n(692330),m=n(911121),u=n(515745),p=n(597024),g=n(568081);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}const f=e=>{let{post:{insightsLastUpdatedAt:t,postedAt:n,viewCount:f,impressionCount:v}}=e;const b=(0,d.b)(),[y,x]=(0,c.useState)(!1),C=(0,m.y)("postImpressions"),E=(0,g.rE)(n,f,v),w=(0,u.h)(n),P=C?(0,p.n_)(b):(0,p.yp)(b),k=w?(0,p.s4)(b):P,I=c.createElement(i.DateTime,{type:"time",value:new Date(t),format:"short"}),_=c.createElement(c.Fragment,null,"Insights were last updated at ",I," and will be updated every 30 minutes."),[,S]=(0,p.l0)(b),O=c.createElement(c.Fragment,null,c.createElement(o.A,{as:"p","data-tag":"update-cadence-popover-metric-explainer",size:"md"},k),c.createElement(r.L,{mb:"16px"}),c.createElement(o.A,{as:"p","data-tag":"update-cadence-popover-post-data",size:"md"},E?S:_),c.createElement(r.L,{mb:"16px"}),c.createElement(o.A,{as:"p","data-tag":"update-cadence-popover-likes-comments",size:"md"},"Patrons who liked or commented are updated near real time."));return c.createElement(a.J,{hideArrow:!0,renderMode:"portal",content:O,id:"update-cadence-popover",isOpen:y,maxWidth:28,minWidth:25,onCloseRequest:()=>x(!1),preferredPlacement:"top-start"},(e=>{let{ref:t,ariaProps:n}=e;return c.createElement(l.x,h({css:{cursor:"pointer"},onClick:()=>x(!y),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),ref:t,width:"fit-content"},n),c.createElement(o.A,{as:"span","data-tag":"update-cadence",muted:!0,variant:"content"},"About post insights"),c.createElement(l.x,{display:"inline-block",pl:.25,verticalAlign:"sub"},c.createElement(s.e,{color:"gray2"})))}))}},144186:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(808397),o=n(825149),r=n(667294),a=n(692330),l=n(597024),s=n(568081);const c=e=>{let{post:{viewCount:t,impressionCount:n,postedAt:c}}=e;const d=(0,a.b)(),[m,u]=(0,l.l0)(d);return(0,s.rE)(c,t,n)?r.createElement(i.j,{placement:"global","data-tag":"no-engagement-metrics",variant:"info"},r.createElement(o.A,null,r.createElement("span",{style:{fontWeight:"bold"}},m)," ",u)):r.createElement(r.Fragment,null)}},892010:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(999007),o=n(218659),r=n(173743),a=n(667294),l=n(692330),s=n(649105),c=n(515745),d=n(108539),m=n(597024),u=n(568081),p=n(671191);const g=e=>{let{post:{nativeVideoPostEngagement:t,postedAt:n,type:g,viewCount:h,impressionCount:f},customizationProps:{hideVideoData:v}}=e;const b=(0,l.b)(),y=(0,u.rE)(n,h,f),x=(0,c.h)(n),C=e=>0===e&&y?a.createElement(a.Fragment,null,"--"):a.createElement(i.Decimal,{value:e}),E=C(h),w=C(f),P=x?a.createElement(p.t,{tag:"num-impressions",label:(0,m.kg)(b),value:w}):a.createElement(p.t,{tag:"num-views",label:(0,m.vm)(b),value:E});if(g!==s.m.VIDEO_EXTERNAL_FILE||v)return P;const{averageViewDuration:k,averageViewPct:I,hasPreview:_,previewViews:S,videoDuration:O}=null!=t?t:m.xE,T=a.createElement(i.Percent,{value:I/100,maximumFractionDigits:0});return a.createElement(o.x,{display:o.x.Display.Flex,flexDirection:o.x.FlexDirection.Column},a.createElement(o.x,{display:o.x.Display.Flex,flexDirection:o.x.FlexDirection.Row},a.createElement(p.t,{tag:"avg-view-duration",value:k>0?T:"--",secondaryValue:k>0&&a.createElement(a.Fragment,null,(0,d.LU)(1e3*k)," / ",(0,d.LU)(1e3*O)),label:a.createElement(a.Fragment,null,"Average view duration")}),P),_&&a.createElement(r.L,{mt:"16px"},a.createElement(p.t,{tag:"num-previews",label:(0,m.wk)(b),value:C(S)})))}},350584:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(623338),o=n(667294),r=n(692330),a=n(723664);const l=e=>{let{customizationProps:{hidePostLink:t},post:n}=e;const l=n.id;return(0,r.b)(),o.createElement(o.Fragment,null,o.createElement("div",{style:{display:"inline-flex"}},o.createElement(a.Z,{post:n})),!t&&o.createElement("div",{"data-tag":"view-post",style:{display:"inline-flex",marginLeft:"auto",marginRight:"4px"}},o.createElement("a",{href:`/posts/${l}`,style:{color:i.T.global.primary.action.default,fontSize:i.T.global.fontSizes.heading.sm,textDecoration:"none"}},o.createElement(o.Fragment,null,"View post"))))}},453694:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(999007),o=n(356961),r=n(218659),a=n(937720),l=n(146746),s=n(623338),c=n(825149),d=n(667294),m=n(526548),u=n(692330),p=n(522675),g=n(89028),h=n(736758);const f=e=>{var t;let{post:n}=e;const f=(0,u.b)(),[v,b]=(0,d.useState)(g.Z.Likes),y=(0,p.x)(),x=null==y||null===(t=y.campaign)||void 0===t?void 0:t.id,C=g.Z.Likes===v?n.likes:n.commenterCount,E=(0,d.useCallback)((e=>{var t;b(e),(0,m.e)({campaign_id:x,post_activity_type:e===g.Z.Likes?"liked":"commented",post_id:null===(t=n.id)||void 0===t?void 0:t.toString()})}),[x,n.id]);return d.createElement(d.Fragment,null,d.createElement(o.Kq,{direction:"horizontal",spacing:3},d.createElement(r.x,{css:"cursor: pointer","data-tag":"select-likes",key:"select-likes",mb:1,onClick:e=>{e.stopPropagation(),E(g.Z.Likes)}},d.createElement(a.I,{as:"div",size:"sm",muted:v!==g.Z.Likes,variant:v===g.Z.Likes?"primary":"content"},d.createElement("span",{style:{textUnderlineOffset:"12px",textDecoration:v===g.Z.Likes?"underline":"none"}},(0,i.translate)(f,"Liked",void 0,"Text indicating that clicking this label will show patrons who liked this post")))),d.createElement(r.x,{css:"cursor: pointer","data-tag":"select-comments",key:"select-comments",mb:1,onClick:e=>{e.stopPropagation(),E(g.Z.Comments)}},d.createElement(a.I,{as:"div",size:"sm",muted:v!==g.Z.Comments,variant:v===g.Z.Comments?"primary":"content"},d.createElement("span",{style:{textUnderlineOffset:"12px",textDecoration:v===g.Z.Comments?"underline":"none"}},(0,i.translate)(f,"Commented",void 0,"Text indicating that clicking this label will show patrons who commented this post"))))),d.createElement(l.i,null),d.createElement("div",{"data-tag":"likes",style:{display:v===g.Z.Likes?"block":"none"}},C>0&&d.createElement("div",{style:{marginTop:s.T.global.space16}},d.createElement(c.A,{as:"span","data-tag":"total-likes",muted:!0,variant:"content"},d.createElement(i.Plural,{one:"# patron liked",other:"# patrons liked",value:C}))),d.createElement(h.Z,{activity:g.Z.Likes,post:n})),d.createElement("div",{"data-tag":"comments",style:{display:v===g.Z.Comments?"block":"none"}},C>0&&d.createElement("div",{style:{marginTop:s.T.global.space16}},d.createElement(c.A,{as:"span","data-tag":"total-comments",muted:!0,variant:"content"},d.createElement(i.Plural,{one:"# patron commented",other:"# patrons commented",value:C}))),d.createElement(h.Z,{activity:g.Z.Comments,post:n})))}},153841:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(298178),o=n(825149),r=n(667294);const a=e=>{let{patron:{fullName:t,imageUrl:n}}=e;return r.createElement("div",{"data-tag":"patron-icon",style:{alignItems:"center",display:"inline-flex"}},r.createElement("div",{"data-tag":"icon",style:{display:"flex",height:"2em",width:"2em"}},r.createElement(i.q,{size:"fluid",src:n})),r.createElement("div",{style:{display:"flex",paddingLeft:"8px"}},r.createElement(o.A,null,t)))}},736758:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(218659),o=n(623338),r=n(825149),a=n(839301),l=n(667294),s=n(669182),c=n(692330),d=n(522675),m=n(459854),u=n(597024),p=n(568081),g=n(89028),h=n(153841),f=n(62377);const v=e=>{var t;let{activity:n,post:{id:v,likes:b,commenterCount:y}}=e;(0,c.b)();const x=(0,m.dD)(),C=(0,d.x)(),E=null==C||null===(t=C.campaign)||void 0===t?void 0:t.id,w=g.Z.Likes===n?l.createElement(l.Fragment,null,"Patrons who liked this post will show up here."):l.createElement(l.Fragment,null,"Patrons who commented on this post will show up here."),[P,k]=(0,l.useState)(1),[I,_]=(0,l.useState)(),{data:S,isLoading:O,nextLink:T}=(0,p.pZ)({activity:n,postId:v.toString(),nextLink:I}),A=!1===O&&null!=S&&"string"==typeof T&&T!==I,[D,L]=(0,p.vP)();(0,l.useEffect)((()=>{null!=S&&L(S)}),[S,L]),(0,l.useEffect)((()=>{E&&v&&(0,s.a)({campaign_id:E,post_id:v.toString(),post_activity_type:n===g.Z.Comments?"commented":"liked",page_num:P,page_size:u.ex})}),[n,E,P,v]);const z=b+y<=0;return l.createElement(i.x,{"data-tag":"patrons",mb:2,width:"100%"},!1===O&&D.length<=0&&l.createElement("div",{style:{marginTop:o.T.global.space16}},l.createElement(r.A,{"data-tag":"no-patrons-to-show",muted:!0,size:"md"},w)),!z&&l.createElement(f.ZP,{onScroll:()=>{A&&(k((e=>e+1)),_(T))},scrollableHeightPx:270-(D.length<=0&&x?20:0)},l.createElement(l.Fragment,null,l.createElement("div",{style:{display:!1!==O?"block":"none",marginLeft:"175px",marginTop:"100px",position:"absolute"}},l.createElement(a.T,{size:"md"})),l.createElement("div",null,D.map((e=>l.createElement(i.x,{key:e.id,pt:2},l.createElement(h.Z,{patron:e}))))))))}},62377:(e,t,n)=>{n.d(t,{ZP:()=>c});var i=n(768379),o=n(218659),r=n(667294);const a=2,l=300,s=i.z.div.withConfig({componentId:"sc-9cw4fy-0"})(["height:","px;overflow:auto;"],(e=>{let{heightPx:t}=e;return t})),c=e=>{let{children:t,onScroll:n,scrollableHeightPx:i=l,scrollableLoadFactor:c=a}=e;const d=(0,r.createRef)(),m=(0,r.useCallback)((()=>{const e=d.current;if(null==e)return;const{scrollHeight:t,clientHeight:n,scrollTop:i}=e;return t-(n+i)}),[d]);return r.createElement("div",{style:{marginRight:"-16px"}},r.createElement(s,{heightPx:i,onScroll:()=>{const e=m();null!=e&&e<i/c&&n()},ref:d,showGradient:!0},t),r.createElement(o.x,{bb:!0,borderColor:o.x.BorderColor.Gray4,borderStrokeWidth:"1px",height:"1px",ml:-2.5,mr:-1}))}},597024:(e,t,n)=>{n.d(t,{J0:()=>s,ex:()=>l,kg:()=>m,l0:()=>c,n_:()=>p,s4:()=>g,vm:()=>d,wk:()=>h,wx:()=>a,xE:()=>r,yp:()=>u});var i=n(999007),o=n(667294);const r={averageViewDuration:0,averageViewPct:0,hasPreview:!1,lastUpdatedAt:(new Date).toISOString(),numViews:0,previewViews:0,sampleUsersCommented:[],sampleUsersLiked:[],sampleUsersViewed:[],videoDuration:0},a={hidePostLink:!1,hidePostViews:!1,hideVideoData:!1},l=50,s=30,c=e=>[(0,i.translate)(e,"Your post is published!",void 0,"First portion of a message indicating that a creator's post has been published but metrics are not yet available."),(0,i.translate)(e,"Insights for new posts are available within 30 minutes.",void 0,"Second portion of a message indicating that a creator's post has been published but metrics are not yet available and should be available 30 minutes after posting.")],d=e=>o.createElement(o.Fragment,null,"Post views"),m=e=>o.createElement(o.Fragment,null,"Impressions"),u=e=>o.createElement(o.Fragment,null,"Post views show the number of times your post’s page was viewed."),p=e=>o.createElement(o.Fragment,null,"Post views show the number of times your post’s page was viewed. This metric was replaced by Impressions for new posts starting April 2023."),g=e=>o.createElement(o.Fragment,null,"Impressions show the number of times your post was seen across Patreon."),h=e=>o.createElement(o.Fragment,null,"Preview views")},568081:(e,t,n)=>{n.d(t,{pZ:()=>g,rE:()=>v,vP:()=>h});var i=n(103881),o=n(730381),r=n.n(o),a=n(667294),l=n(515745),s=n(432645),c=n(597024),d=n(89028);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){let{activity:t,postId:n,pageCount:o=c.ex,nextLink:r}=e;const[l,,{isLoading:m},{links:p}]=(0,i.Z)({dataKey:`posts/${n}/${t}`,endpoint:null!=r?r:(0,s.R)(`posts/${n}/${t}`,{"json-api-use-default-includes":!1,fields:["avatar_photo_image_urls","fullName","image_url"],include:t===d.Z.Comments?["commenter","on_behalf_of_campaign"]:["user","on_behalf_of_campaign"],page:{count:o},sort:t===d.Z.Comments?"-created":void 0}),fetchOnMount:!0},[t,n,r]);return(0,a.useMemo)((()=>null==l?{isLoading:m,nextLink:null==p?void 0:p.next}:{data:l.filter((e=>!f(e)||null==e.onBehalfOfCampaign)).map((e=>{return f(e)?u(u({},e.commenter),{},{id:Number(e.commenter.id)}):{fullName:null!==(t=null===(n=e.onBehalfOfCampaign)||void 0===n?void 0:n.name)&&void 0!==t?t:e.user.fullName,id:Number(e.user.id),imageUrl:null!==(i=null===(o=e.onBehalfOfCampaign)||void 0===o||null===(r=o.avatarPhotoImageUrls)||void 0===r?void 0:r.thumbnail)&&void 0!==i?i:e.user.imageUrl};var t,n,i,o,r})),isLoading:m,nextLink:null==p?void 0:p.next}),[m,p,l])}function h(){const[e,t]=(0,a.useState)([]),[n,i]=(0,a.useState)(new Set);return[e,(0,a.useCallback)((e=>{const o=new Set,r=e.filter((e=>!n.has(e.id)&&!o.has(e.id)&&(o.add(e.id),!0)));t((e=>e.concat(r))),i((e=>(o.forEach((t=>e.add(t))),e)))}),[n,i,t])]}function f(e){return"object"==typeof e&&null!=(null==e?void 0:e.commenter)}function v(e,t,n){return((0,l.h)(e)?n:t)<=0&&r()().diff(e,"minutes")<=c.J0}},80518:(e,t,n)=>{n.d(t,{Z:()=>k});var i=n(768379),o=n(218659),r=n(961080),a=n(505838),l=n(354355),s=n(937720),c=n(825149),d=n(73266),m=n(173743),u=n(650308),p=n(667294),g=n(459854),h=n(459657),f=n(144186),v=n(892010),b=n(350584),y=n(453694),x=n(597024);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=i.z.span.withConfig({componentId:"sc-1o821a4-0"})(["-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;overflow:hidden;word-break:break-word;"]),k=e=>{let{closeModal:t,customizationProps:n=E({},x.wx),isOpen:i,post:C}=e;const w=(0,g.dD)(),k=p.createElement(o.x,null,p.createElement(o.x,{"data-tag":"modal-title",mb:3},p.createElement(r.r,{p:0},p.createElement(a.X,null,p.createElement(l.J,{bottomPadding:!1,xs:10,md:10,sm:10},p.createElement(o.x,null,p.createElement(o.x,{mb:.5},p.createElement(s.I,{as:"div","data-tag":"title",variant:"content"},p.createElement(P,null,C.title))),p.createElement(c.A,{as:"div","data-tag":"post-timestamp",muted:!0,variant:"content"},p.createElement(h.Z,{date:C.postedAt})))),p.createElement(l.J,{alignSelf:"auto",bottomPadding:!1,md:2,sm:2,xs:2},p.createElement(o.x,{css:{cursor:"pointer"},onClick:e=>t&&t(e),textAlign:"right"},p.createElement(d.h,{"data-tag":"close-modal",size:"sm"})))))),!n.hidePostViews&&p.createElement(p.Fragment,null,p.createElement(o.x,{"data-tag":"engagement-metrics",mb:3},p.createElement(m.L,{mb:"12px"},p.createElement(f.Z,{post:C})),p.createElement(v.Z,{post:C,customizationProps:n}))),p.createElement(o.x,{"data-tag":"patron-activity"},p.createElement(y.Z,{post:C})),!n.hidePostViews&&p.createElement(o.x,{alignItems:"center","data-tag":"modal-footer",display:"flex",pt:2},p.createElement(b.Z,{post:C,customizationProps:n})));return p.createElement(u.V,{id:"postInsightsModal",isOpen:i,scrollable:"inner",size:w?void 0:"sm",onCloseRequest:t,showCloseButton:!1},k)}},89028:(e,t,n)=>{let i;n.d(t,{Z:()=>i}),function(e){e.Comments="comments",e.Likes="likes"}(i||(i={}))},186159:(e,t,n)=>{n.d(t,{Z:()=>we});var i=n(999007),o=n(650308),r=n(356961),a=n(45697),l=n.n(a),s=n(667294),c=n(468254),d=n(166130),m=n(692330),u=n(710184),p=n(229081),g=n(768379),h=n(623338),f=n(77885),v=n(140085),b=n(937720),y=n(825149);const x=e=>{let{title:t,subtitle:n,align:i,icon:o}=e;const a=g.z.div.withConfig({componentId:"sc-krupux-0"})(["display:flex;flex-direction:column;align-items:",";gap:8px;text-align:",";p{margin:0px;}"],i,i),l=g.z.div.withConfig({componentId:"sc-krupux-1"})(["margin:auto;width:",";height:",";background-color:",";border-radius:50%;display:flex;align-items:center;justify-content:center;"],h.T.global.space56,h.T.global.space56,h.T.global.success.muted.default);return s.createElement(r.Kq,{spacing:r.Kq.Spacing.Md,fluidHeight:!0,fluidWidth:!0},o&&s.createElement(l,null,s.createElement(f.A,{color:v.J.Color.Success,size:v.J.Size.Lg})),s.createElement(a,null,s.createElement(s.Fragment,null,s.createElement(b.I,{size:"xl",as:"div"},t),s.createElement(y.A,{size:"md"},n))))};var C=n(703875),E=n(398032),w=n(496486),P=n(444607),k=n(795435),I=n(602720),_=n(345647),S=n(622805);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A=()=>s.createElement(D,null,s.createElement(L,null),s.createElement(z,null,s.createElement(R,null),s.createElement(R,{width:"120px"}))),D=g.z.div.withConfig({componentId:"sc-11xgo3i-0"})(["display:flex;flex-direction:row;gap:8px;width:100%;"]),L=g.z.div.withConfig({componentId:"sc-11xgo3i-1"})(["border-radius:",";background-color:",";width:32px;height:32px;"],h.T.global.radius.circle,h.T.global.secondary.action.default),z=g.z.div.withConfig({componentId:"sc-11xgo3i-2"})(["display:flex;flex-direction:column;justify-content:space-evenly;align-items:flex-start;gap:",";flex-grow:1;"],h.T.global.space8),R=g.z.div.withConfig({componentId:"sc-11xgo3i-3"})(["width:",";height:4px;background-color:",";border-radius:2px;"],(e=>e.width||"100%"),h.T.global.secondary.action.default),M=g.z.div.withConfig({componentId:"sc-11xgo3i-4"})(["display:flex;flex-direction:column;align-items:flex-start;padding:16px;gap:16px;background-color:",";box-shadow:",";border-radius:12px;"],h.T.global.bg.elevated.default,h.T.global.boxShadow.mid),U=g.z.div.withConfig({componentId:"sc-11xgo3i-5"})(["position:relative;",";background-size:cover;background-position:center;width:100%;padding-bottom:50%;border-radius:",";"],(e=>e.metaImageUrl&&`background: url(${e.metaImageUrl})`),h.T.global.radius.md),j=g.z.div.withConfig({componentId:"sc-11xgo3i-6"})(["position:absolute;display:flex;top:0;right:0;margin:8px;gap:8px;"]),N=e=>{let{metaImageUrl:t,fromPostFeed:n,analyticsInfo:i}=e;const o=(0,m.b)();let r={};if(t){const e=(0,S.g)(t);r={[I.y.DownloadPreviewImage]:(0,_._v)(e,o),[I.y.CopyPreviewImage]:(0,_.pM)(e,o)}}const a=(0,C.Ps)();return s.createElement(M,null,s.createElement(A,null),s.createElement(U,{"data-tag":"promotion-modal-preview-image",metaImageUrl:t},s.createElement(j,null,(0,w.map)(r,((e,t)=>s.createElement(E.z,{loggerId:"promotion-modal-preview-image-button","data-tag":"promotion-modal-preview-image-button",key:t,onClick:t=>((e,t)=>{t.onClick(e).then((()=>{const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({social:(0,I.j)(t.key)},i);n?(0,P.s)(e):(0,k.l)(e),t.onClickMessage&&a.success(t.onClickMessage,{key:t.key})})).catch((()=>{t.errorMessage&&a.error(t.errorMessage,{key:t.key})}))})(t,e),icon:e.icon,variant:E.z.Variant.InsetBlack,elevated:!0}))))))};var F=n(103881),B=n(839301),V=n(432645),W=n(979157),Z=n(520797);let H;function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VIDEO_PREVIEW="Video preview",e.PROMOTIONAL_IMAGE="Promotional image",e.VIDEO_THUMBNAIL="Video thumbnail"}(H||(H={}));const J=()=>s.createElement($,null,s.createElement(K,null),s.createElement(X,null,s.createElement(Y,null),s.createElement(Y,{width:"120px"}))),$=g.z.div.withConfig({componentId:"sc-1hkx02p-0"})(["display:flex;flex-direction:row;gap:8px;width:100%;"]),K=g.z.div.withConfig({componentId:"sc-1hkx02p-1"})(["border-radius:",";background-color:",";width:32px;height:32px;"],h.T.global.radius.circle,h.T.global.secondary.action.default),X=g.z.div.withConfig({componentId:"sc-1hkx02p-2"})(["display:flex;flex-direction:column;justify-content:space-evenly;align-items:flex-start;gap:",";flex-grow:1;"],h.T.global.space8),Y=g.z.div.withConfig({componentId:"sc-1hkx02p-3"})(["width:",";height:4px;background-color:",";border-radius:2px;"],(e=>e.width||"100%"),h.T.global.secondary.action.default),Q=g.z.div.withConfig({componentId:"sc-1hkx02p-4"})(["display:flex;flex-direction:column;align-items:flex-start;padding:16px;gap:16px;background-color:",";box-shadow:",";border-radius:12px;"],h.T.global.bg.elevated.default,h.T.global.boxShadow.mid),ee=g.z.div.withConfig({componentId:"sc-1hkx02p-5"})(["position:relative;",";background-size:cover;background-position:center;width:100%;padding-bottom:50%;border-radius:",";"],(e=>e.previewUrl&&`background: url(${e.previewUrl})`),h.T.global.radius.md),te=g.z.div.withConfig({componentId:"sc-1hkx02p-6"})(["position:relative;width:100%;border-radius:",";"],h.T.global.radius.md),ne=g.z.div.withConfig({componentId:"sc-1hkx02p-7"})(["position:absolute;display:flex;top:0;right:0;margin:8px;gap:8px;"]),ie=g.z.div.withConfig({componentId:"sc-1hkx02p-8"})(["position:relative;overflow:hidden;width:100%;@media (max-height:600px){padding-top:520px;}border-radius:6px;"]),oe=g.z.div.withConfig({componentId:"sc-1hkx02p-9"})(["position:absolute;height:100%;width:100%;top:0;left:0;right:0;bottom:0;margin:auto;cursor:pointer;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1;"]),re=e=>{var t,n,i,o,r,a,l;let{currentUser:c,post:d,imgPreviewUrl:u,mediaOption:p,fromPostFeed:g,analyticsInfo:h}=e;const f=(0,m.b)();let v={};if(u){const e=(0,S.g)(u);v={[I.y.DownloadPreviewImage]:(0,_._v)(e,f),[I.y.CopyPreviewImage]:(0,_.pM)(e,f)}}const[,b]=(0,F.Z)({dataKey:"post",endpoint:(0,V.R)(`/posts/${d.id}`),fetchOnMount:!0}),[y,x]=(0,s.useState)(null!==(t=d.videoPreview)&&void 0!==t&&t.url?d.videoPreview:void 0),[O,T]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=setInterval((async()=>{p===H.VIDEO_PREVIEW&&!y&&O<10&&(b.get({endpoint:(0,V.R)(`posts/${d.id}`)}).then((e=>{var t;null!==(t=e.videoPreview)&&void 0!==t&&t.url&&x(e.videoPreview)})),T(O+1))}),1e3);return()=>clearInterval(e)}),[d.id,y,b,p,x,O]);const A=(0,C.Ps)(),D=(0,Z.Z)({maxHeight:202,videoWidth:(null===(n=d.videoPreview)||void 0===n?void 0:n.width)||0,videoHeight:(null===(i=d.videoPreview)||void 0===i?void 0:i.height)||0});return s.createElement(Q,null,s.createElement(J,null),p===H.VIDEO_PREVIEW&&!y&&c&&s.createElement(ie,D,s.createElement(oe,null,s.createElement(B.T,{color:B.T.Color.Dark})),s.createElement("video",{width:"100%",height:"100%","object-fit":"cover",controls:!0})),y&&p===H.VIDEO_PREVIEW&&c&&s.createElement(te,null,s.createElement(W.default,{campaignId:null===(o=d.campaign)||void 0===o?void 0:o.id,postId:d.id.toString(),userId:null===(r=c.id)||void 0===r?void 0:r.toString(),videoId:(null===(a=y.mediaId)||void 0===a?void 0:a.toString())||"",controls:!0,videoUrl:y.url||"",thumbnailUrl:null===(l=d.thumbnail)||void 0===l?void 0:l.url,videoWidth:y.width||0,videoHeight:y.height||0,maxHeight:202,duration:y.duration,fullDuration:y.fullDuration,videoProgress:y.progress})),u&&(p===H.PROMOTIONAL_IMAGE||p===H.VIDEO_THUMBNAIL)&&s.createElement(ee,{"data-tag":"promotion-modal-preview-image",previewUrl:u},s.createElement(ne,null,(0,w.map)(v,((e,t)=>s.createElement(E.z,{loggerId:"promotion-modal-preview-image-button","data-tag":"promotion-modal-preview-image-button",key:t,onClick:t=>((e,t)=>{t.onClick(e).then((()=>{const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({social:(0,I.j)(t.key)},h);g?(0,P.s)(e):(0,k.l)(e),t.onClickMessage&&A.success(t.onClickMessage,{key:t.key})})).catch((()=>{t.errorMessage&&A.error(t.errorMessage,{key:t.key})}))})(t,e),icon:e.icon,variant:E.z.Variant.InsetBlack,elevated:!0}))))))};var ae=n(378813),le=n(179302),se=n(445488),ce=n(342222),de=n.n(ce),me=n(921968),ue=n(459854),pe=n(868963),ge=n(775439);function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},he.apply(this,arguments)}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const be="showNewTweetEmbedAnnouncemnt",ye=g.z.div.withConfig({componentId:"sc-121l4tv-0"})(["display:flex;flex-direction:row;align-items:flex-start;gap:",";flex-wrap:wrap;"],h.T.global.space8),xe=g.z.div.withConfig({componentId:"sc-121l4tv-1"})(["flex:1 0 35%;"]),Ce=e=>{let{post:t,fromPostFeed:n,analyticsInfo:o}=e;const r=(0,ue.dD)(),a=(0,m.b)(),[l,c]=(0,s.useState)(!1);(0,s.useEffect)((()=>{c(null===de().get(be))}),[c]);const d=(0,w.pick)((0,pe.ib)(t,a),I.y.Twitter,I.y.Facebook,I.y.Pinterest,I.y.CopyLink),u={[I.y.Sharesheet]:(0,_.pm)((0,pe.Qv)(t,I.y.Sharesheet,"join_link"),a)},p=(0,C.Ps)(),g=e=>{let{button:t}=e;const i=()=>{t.onClickMessage&&p.success(t.onClickMessage,{key:t.key});const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({social:(0,I.j)(t.key)},o);n?(0,P.s)(e):(0,k.l)(e)},r=s.createElement(E.z,{loggerId:"promotion-modal-share-button","data-tag":"promotion-modal-share-button",key:t.key,icon:t.icon,variant:t.key===I.y.Sharesheet?E.z.Variant.Primary:E.z.Variant.Secondary,fluid:!0,onClick:e=>{t.onClick?t.onClick(e).then(i).catch((()=>{})):i()}},t.actionLabel);return t.key===I.y.CopyLink||t.key===I.y.Sharesheet?r:s.createElement(ge.Z,{width:t.windowConfig.width,height:t.windowConfig.height,href:t.href},r)},h=r&&(null===(f=(0,me.ZP)().navigator)||void 0===f?void 0:f.canShare)?u:d;var f;return s.createElement(ye,null,(0,w.map)(h,(e=>"twitter"===e.key?l?s.createElement(ae.J,{preferredPlacement:ae.J.Placement.TopStart,content:s.createElement("span",null,s.createElement(le.x,{weight:le.x.Weight.Bold},"NEW!")," ",s.createElement(le.x,null,"Now people can watch the preview of your video right on Twitter.")),isOpen:l,onCloseRequest:()=>{c(!1),de().set(be,!1)}},(t=>{let{ref:n,ariaProps:i}=t;return s.createElement(xe,he({ref:n},i,{key:e.key}),s.createElement(g,{button:e}))})):s.createElement(se.u,{preferredPlacement:ae.J.Placement.TopStart,textContent:(0,i.translate)(a,"People can now watch video previews on Twitter",void 0,"Hint that describes that people can now watch video previews on Twitter with this feature")},s.createElement(xe,{key:e.key},s.createElement(g,{button:e}))):s.createElement(xe,{key:e.key},s.createElement(g,{button:e})))))},Ee=e=>{var t,n;let{post:a,currentUser:l,metaImageUrl:g,isOpen:h,fromPostCreation:f,fromPostFeed:v,analyticsInfo:b,onClose:y}=e;const C=(0,p.a)("offPlatformPreviews"),E="video_previews"===(null==C||null===(t=C.exposureData)||void 0===t?void 0:t.variantName);(0,s.useEffect)((()=>{h&&null!=C&&C.exposureData&&(0,c.J)(null==C?void 0:C.exposureData)}),[h,C]),(0,u.yG)()&&g&&(g=g.replace(/devx-.+\.patreondev\.com/,"patreon.com"));const w=(e=>e.postType?e.postType===d.mN.VIDEO_EXTERNAL_FILE&&e.videoPreview?H.VIDEO_PREVIEW:[d.mN.VIDEO_EMBED,d.mN.VIDEO_EXTERNAL_FILE].indexOf(e.postType)>-1?H.VIDEO_THUMBNAIL:H.PROMOTIONAL_IMAGE:H.PROMOTIONAL_IMAGE)(a),P=w===H.VIDEO_THUMBNAIL?null===(n=a.thumbnail)||void 0===n?void 0:n.url:g,k=(0,m.b)(),I=f?(0,i.translate)(k,"Your post is live!",void 0,"Post promotion modal heading text"):(0,i.translate)(k,"Share post",void 0,"Post promotion modal heading text"),_=f?(0,i.translate)(k,"Share your new post with more people to encourage your friends and followers to become patrons too.",void 0,"Heading for a prompt to creators to share their posts to social media"):(0,i.translate)(k,"Share your post with more people to encourage your friends and followers to become patrons too.",void 0,"Heading for a prompt to creators to share their posts to social media");return s.createElement(s.Fragment,null,s.createElement(o.V,{id:"postPromotionModal","data-tag":"post-promotion-modal",size:"sm",isOpen:h,onCloseRequest:y},s.createElement(r.Kq,{id:"postPromotionModalContainer",spacing:r.Kq.Spacing.Lg,fluidHeight:!0,fluidWidth:!0},s.createElement(x,{title:I,subtitle:_,icon:f,align:f?"center":"left"}),E?s.createElement(re,{currentUser:l,post:a,imgPreviewUrl:P,mediaOption:w,fromPostFeed:v,analyticsInfo:b}):s.createElement(N,{metaImageUrl:g,fromPostFeed:v,analyticsInfo:b}),s.createElement(Ce,{post:a,fromPostFeed:v,analyticsInfo:b}))))};Ee.propTypes={metaImageUrl:l().string,isOpen:l().bool,onClose:l().func};const we=Ee},682327:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(999007),o=n(650308),r=n(45697),a=n.n(r),l=n(667294),s=n(571995);function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends l.Component{constructor(){super(...arguments),c(this,"state",{isOpen:!1}),c(this,"onButtonClick",(()=>{var e,t;null===(e=(t=this.props.dialogProps).onButtonClickAction)||void 0===e||e.call(t),this.setState({isOpen:!0})})),c(this,"confirmAction",(e=>{this.setState({isOpen:!1}),this.props.dialogProps.confirmAction()})),c(this,"close",(()=>{this.setState({isOpen:!1})})),c(this,"closeAndCancel",(()=>{var e,t;this.setState({isOpen:!1}),null===(e=(t=this.props.dialogProps).cancelAction)||void 0===e||e.call(t)}))}render(){const{dialogProps:e}=this.props,t=l.Children.map(this.props.children,(e=>l.cloneElement(e,{onClick:this.onButtonClick})));return l.createElement("span",null,t,l.createElement(o.V,{"data-tag":e.dataTag,size:"sm",scrollable:"all",isOpen:this.state.isOpen,title:e.title,primaryAction:{label:e.confirmationButtonText,onClick:this.confirmAction,variant:e.primaryActionVariant,id:e.confirmationButtonId},secondaryAction:{label:e.cancelButtonText||l.createElement(s.GX,null),onClick:this.closeAndCancel},onCloseRequest:this.close},e.description))}}c(d,"contextType",i.LocaleContext),c(d,"propTypes",{dialogProps:a().shape({show:a().bool,title:a().string.isRequired,description:a().node.isRequired,onButtonClickAction:a().func,confirmationButtonText:a().string.isRequired,confirmAction:a().func.isRequired,cancelButtonText:a().string,cancelAction:a().func,confirmationButtonId:a().string,primaryActionVariant:a().string,dataTag:a().string}).isRequired,children:a().node}),c(d,"displayName","SafeActionButton");const m=d},524261:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(999007),o=n(398032),r=n(45697),a=n.n(r),l=n(667294),s=n(571995),c=n(682327),d=n(692330);const m=e=>{const t=(0,d.b)(),n=e.entity.toLowerCase();return l.createElement(c.Z,{dialogProps:{title:(0,i.translate)(t,"Delete {entityToDelete}?",{entityToDelete:e.entity},"Title of button that deletes something"),description:(0,i.translate)(t,"Are you sure you want to delete this {entityToDelete}? You cannot undo this action.",{entityToDelete:n},"Confirmation text that appears after clicking the button to delete something"),primaryActionVariant:o.z.Variant.Critical,confirmAction:e.confirmAction,confirmationButtonText:(0,i.translate)(t,"Delete",void 0,"button text to perform the delete action"),cancelButtonText:l.createElement(s.GX,null),onButtonClickAction:e.onButtonClickAction,cancelAction:e.cancelAction}},e.children)};m.propTypes={confirmAction:a().func,cancelAction:a().func,onButtonClickAction:a().func,entity:a().string,children:a().node};const u=m},3944:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(999007),o=n(45697),r=n.n(o),a=n(667294),l=n(682327),s=n(571995),c=n(692330);const d=e=>{const t=(0,c.b)(),n=(0,i.translate)(t,"This will appear at the top of your profile and replace any previously pinned post. Are you sure?",void 0,"Modal info text confirming whether user wants to pin this post"),o=(0,i.translate)(t,"Are you sure you want to unpin this post?",void 0,"Modal info text confirming whether user wants to unpin this post");return a.createElement(l.Z,{dialogProps:{title:e.toUnpin?(0,i.translate)(t,"Unpin this post",void 0,"Modal title text for un-pinning a post"):(0,i.translate)(t,"Pin this post",void 0,"Modal title text for pinning a post"),description:e.toUnpin?o:n,confirmAction:e.confirmAction,confirmationButtonText:e.toUnpin?(0,i.translate)(t,"Unpin",void 0,"Button text to confirm the action of pinning a post"):(0,i.translate)(t,"Pin it!",void 0,"Button text to confirm the action of un-pinning a post"),cancelButtonText:a.createElement(s.GX,null)}},e.children)};d.propTypes={toUnpin:r().bool,confirmAction:r().func,children:r().node};const m=d},153117:(e,t,n)=>{n.d(t,{D:()=>p});var i=n(16420),o=n(105073),r=n(179302),a=n(623338),l=n(45697),s=n.n(l),c=n(667294),d=n(768379);const m=["showH3","variant"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}function p(e){let{showH3:t=!1,variant:n=i.A.Variant.Primary}=e,r=function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,m);return c.createElement(o.mt,null,(e=>c.createElement(g,u({},r,{showH3:t,mainColor:e,variant:n}))))}p.propTypes={showH3:s().bool,variant:s().string};const g=d.z.div.withConfig({componentId:"sc-1sp3zau-0"})([""," && a{color:",";text-decoration:underline !important;font-weight:",";:hover{","}}"],(e=>e.showH3&&d.i`
      && h3 {
        letter-spacing: ${e.theme.text.tracking[r.x.Tracking.Wide]};
        text-transform: uppercase;
        weight: ${e.theme.text.getWeight(i.A.Weight.Bold)};
        font-size: ${e.theme.text.getSize(r.x.Size.Sm)};
        color: ${a.T.global.content.regular.default};
      }
    `),(e=>e.theme.textButtons.getColor(e.color,e.theme.colors,e.mainColor,e.variant)),(e=>`${e.theme.text.getWeight(i.A.Weight.Normal)} !important`),(e=>e.theme.textButtons.hoverStyles))},94282:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(218659),o=n(227361),r=n.n(o),a=n(45697),l=n.n(a),s=n(667294);const c=e=>{let{flairs:t=[],campaignId:n,showAll:o=!1}=e;return t.map((e=>{const t=r()(e,"campaign.url"),a=n===r()(e,"campaign.id");return t&&(a||o)?s.createElement("a",{href:e.campaign.url},s.createElement(i.x,{display:i.x.Display.Inline,pl:1},s.createElement("img",{alt:e.name,title:e.name,style:{height:"16px",width:"16px"},src:e.imageTinyUrl}))):null}))};c.propTypes={flairs:l().arrayOf(l().shape({campaign:l().shape({url:l().string.isRequired}).isRequired,name:l().string.isRequired,imageTinyUrl:l().string.isRequired}))};const d=c},401815:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(357635),o=n(662282);const r=(0,i.N)(o.Z)},662282:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(999007),o=n(218659),r=n(45697),a=n.n(r),l=n(667294),s=n(692330),c=n(878774);const d=e=>{let{avatarPhotoUrl:t,name:n,url:r}=e;const a=(0,s.b)();return l.createElement(o.x,{p:1},r?l.createElement("a",{href:r,"aria-label":(0,i.translate)(a,"Go to {name}'s page",{name:n},"Accessibility label for a link that takes the user to the creator page")},l.createElement(c.Z,{avatar:t,primaryText:n})):l.createElement(c.Z,{avatar:t,primaryText:n}))};d.propTypes={url:a().string,avatarPhotoUrl:a().string.isRequired,name:a().string.isRequired};const m=d},774300:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(505693);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}const a=e=>i.createElement(o.u,r({importer:()=>Promise.all([n.e(7448),n.e(8243),n.e(1293),n.e(5926),n.e(5640),n.e(2629),n.e(1480),n.e(5473),n.e(9698)]).then(n.bind(n,369698))},e))},841347:(e,t,n)=>{n.d(t,{U:()=>i});const i={public:"public",patrons:"patrons",tier:"tier",minCentsPledged:"min_cents_pledged"}},362882:(e,t,n)=>{let i;n.d(t,{Wi:()=>i,yO:()=>o}),function(e){e.NOT_BEING_REVIEWED="not_being_reviewed",e.FLAGGED="flagged",e.FLAGGED_IN_REVIEW="flagged_in_review",e.SUSPENDED="suspended",e.SUSPENDED_IN_REVIEW="suspended_in_review",e.IN_REVIEW="in_review",e.UNDER_REFORM="under_reform",e.PENDING_REVIEW="pending_review"}(i||(i={}));const o=[i.SUSPENDED_IN_REVIEW,i.SUSPENDED,i.IN_REVIEW];Object.keys({DO_criminal_organizations:"Criminal Organizations",DO_organized_hate:"Organized Hate",DO_other_violent_actors:"Other Violent Actors",DO_terrorist_organizations:"Terrorist Organizations",HA_dangerous_acts_and_challenges:"Dangerous Acts and Challenges",HA_eating_disorders:"Eating Disorders",HA_feederism:"Feederism",HA_self_harm:"Self Harm",HA_suicide:"Suicide",HS_dehumanizing_language:"Dehumanizing Language",HS_segregation_and_exclusionary_language:"Segregation and Exclusionary Language",HS_siidc:"SIIDC",HS_slurs:"Slurs",HS_violent_hate_speech:"Violent Hate Speech",HT_bullying_and_harassment:"Bullying and Harassment",HT_dogpiling:"Dogpiling",HT_doxxing:"Doxing",HT_revenge_porn:"Revenge Porn",HT_swating:"SWATing",HT_threats_and_inciting_violence:"Threats and Inciting Violence",IPOps_image_rights:"Image Rights",IPOps_noci_copyright:"NOCI Copyright",IPOps_noci_patent:"NOCI Patent",IPOps_noci_trademark:"NOCI Trademark",IPOps_publicity_rights:"Publicity Rights",IPOps_user_death:"User Death",IRA_criminal_activity_criminal_pasts:"Criminal Pasts",IRA_criminal_activity_property_crime:"Property Crime",IRA_criminal_activity_violent_crime:"Violent Crime",IRA_crypto_fa_gambling_finance_and_cryptocurrency:"Finance and Cryptocurrency",IRA_crypto_fa_gambling_gambling:"Gambling",IRA_crypto_fa_gambling_investments:"Investments",IRA_crypto_fa_gambling_raffles:"Raffles",IRA_drugs_alcohol_and_smoking:"Alcohol and Smoking",IRA_drugs_drugs:"Drugs",IRA_drugs_health_hygiene_consumables:"Health, Hygiene, and Consumables",IRA_drugs_medications_and_supplements:"Medications and Supplements",IRA_misuse_authenticity:"Authenticity",IRA_misuse_mlm_and_direct_selling:"Multi-Level Marketing and Direct Selling",IRA_misuse_spam:"Spam",IRA_weapons_bladed_and_edged_weapon:"Bladed and Edged Weapon",IRA_weapons_firearms_and_explosives:"Firearms and Explosives",IRA_weapons_modified_weapons:"Modified weapons",MD_disinformation_deepfake:"Deepfake",MD_disinformation_qanon_disinformation:"QAnon Disinformation",MD_misinformation_covid_medical_misinformation:"Medical Misinformation",MD_misinformation_elections_misinformation:"Elections Misinformation",MS_age_gate_age_verification:"Age verification",MS_age_gate_failed_av:"Failed Age Verification",MS_age_gate_unresponsive_av:"Unresponsive Age Verification",MS_child_abuse:"Child Abuse",MS_child_sexual_abuse_CSAM:"CSAM",MS_child_sexual_abuse_grooming:"Grooming",MS_child_sexual_abuse_soliciting:"Soliciting",MS_depictions_sexualized_minors_animated_depictions_sexualized_minors:"Animated Depictions of Sexualized Minors",MS_depictions_sexualized_minors_live_depictions_sexualized_minors:"Live Depictions of Sexualized Minors",Others_account_deletion:"Account deletion",Others_circumvention_of_guidelines:"Circumvention of guidelines",Others_clarification_needed:"Clarification Needed",Others_creator_is_not_being_cooperative:"Creator is not being cooperative",Others_creator_is_unresponsive:"Creator is unresponsive",Others_creator_needs_more_time:"Creator needs more time",Others_other:"Other",Others_repeat_offender:"Repeat offender",SGCsa_bestiality_animated_bestiality:"Animated Bestiality",SGCsa_bestiality_live_bestiality:"Live Bestiality",SGCsa_incest_animated_incest:"Animated Incest",SGCsa_incest_live_incest:"Live Incest",SGCsa_non_con_animated_non_con:"Animated Non-Con",SGCsa_non_con_live_non_con:"Live Non-Con",SGCsc_adult_content_animated_not_flagged_as_adult_content:"Animated Not flagged as adult content",SGCsc_adult_content_live_not_flagged_as_adult_content:"Live Not flagged as adult content",SGCsc_deepfakes_sgc:"Deepfakes (SGC)",SGCsc_nudity_animated_public_nudity:"Animated Nudity",SGCsc_nudity_live_public_nudity:"Live Nudity",SGCsc_pornography:"Pornography",SGCsc_sex_tourism:"Sex Tourism",SGCsc_sexual_services_custom_content:"Custom Content",SGCsc_sexual_services_one_on_one_interactions:"One-on-one interactions",SGCsc_sexual_services_selling_bodily_items:"Selling bodily items",SGCsc_sexual_services_selling_underwear:"Selling Underwear",VGC_animal_abuse:"Animal abuse",VGC_fictional_or_dramatized_content:"Fictional or Dramatized Content",VGC_glorification_of_violence:"Glorification of Violence",VGC_human_abuse:"Human abuse"})},420166:(e,t,n)=>{n.d(t,{d:()=>o});var i=n(999007);const o=(0,i.translate)(i.DEFAULT_LOCALE,"creation",void 0,"Fallback label 'creation' to describe the creator's work");(0,i.translate)(i.DEFAULT_LOCALE,"art",void 0,"Fallback label 'art' to describe the creator's work")},615555:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(667294),o=n(768379),r=n(623338),a=n(937720),l=n(398032),s=n(468484),c=n(692330);const d=o.z.div.withConfig({componentId:"sc-1ujxq0u-0"})(["display:flex;flex-direction:column;align-items:center;gap:",";margin:"," 0;padding:calc("," + ",") ",";"],r.T.global.space16,r.T.global.space16,r.T.global.space56,r.T.global.space40,r.T.global.space16),m=function(e){let{onConfirm:t,isLoading:n}=e;return(0,c.b)(),i.createElement(d,null,i.createElement(a.I,{as:"p"},"You must be 18+ to view this content"),i.createElement(s.Z,null,i.createElement(l.z,{loggerId:"age-confirmation-button",variant:"primary","data-tag":"age-confirmation-button",isLoading:n,disabled:n,onClick:t,size:"xs"},"Yes, I am 18 or older")))};var u=n(259926);const p=()=>{},g=(0,u.Z)((function(e){let{children:t,isAgeGated:n,eventParams:o,isCanSeeNsfwLoading:r,canSeeNsfw:a,handleAgeConfirm:l=p}=e;const[s,c]=(0,i.useState)(!1);return n&&!a?i.createElement(m,{isLoading:!(!s||!r),onConfirm:()=>(c(!0),l(o))}):i.createElement(i.Fragment,null,t)}))},516514:(e,t,n)=>{n.d(t,{P5:()=>s,Xx:()=>u,fr:()=>l,im:()=>r,nQ:()=>d,o5:()=>m,xG:()=>c});var i=n(768379),o=n(623338);const r=i.z.div.withConfig({componentId:"sc-tun8l6-0"})(["",""],(e=>e.isOptimistic?"opacity: 0.5;":"")),a=i.i`
  background-color: ${o.T.global.bg.alt.default};
`,l=i.z.div.withConfig({componentId:"sc-tun8l6-1"})(["",";"],(e=>`\n    ${a}\n    border-radius: ${o.T.global.radius.circle};\n    height: ${e.theme.units.getValue(4)};\n    width: ${e.theme.units.getValue(4)};\n`)),s=i.z.div.withConfig({componentId:"sc-tun8l6-2"})(["",";"],(e=>`\n    ${a}\n    height: ${e.theme.units.getValue(1.5)};\n    margin-bottom: ${e.theme.units.getValue(1)};\n    width: ${e.width};\n`)),c=i.z.div.withConfig({componentId:"sc-tun8l6-3"})(["",";"],(e=>`\n    color: ${e.deleted?o.T.global.content.muted.default:o.T.global.content.regular.default};\n    font-size: ${e.theme.text.getSize(0)};\n    font-style: ${e.deleted?"italic":"normal"};\n    font-weight: ${e.theme.text.getWeight("normal")};\n    margin-bottom: ${e.theme.units.getValue(1)};\n    white-space: pre-wrap;\n    word-break: break-word;\n\n    a {\n        color: ${e.theme.textButtons.getColor("primary",e.theme.colors)};\n        font-weight: ${e.theme.text.getWeight("bold")};\n        text-decoration-skip: ink;\n\n        &:hover {\n            ${e.theme.textButtons.hoverStyles}\n        }\n    }\n`)),d=i.z.div.withConfig({componentId:"sc-tun8l6-4"})(["&:not(:last-child){margin-right:",";}"],(e=>e.theme.units.getValue(4))),m=i.z.button.withConfig({componentId:"sc-tun8l6-5"})(["-webkit-appearance:none;background:none;border:none;display:flex;margin:",";outline:none;padding:",";width:auto;"],(e=>e.theme.units.getValues(-.5)),(e=>e.theme.units.getValue(.5))),u=i.z.div.withConfig({componentId:"sc-tun8l6-6"})(["flex-basis:auto;flex-grow:0;white-space:nowrap;"])},179433:(e,t,n)=>{n.d(t,{s:()=>z});var i=n(999007),o=n(140085),r=n(218659),a=n(14926),l=n(178468),s=n(112338),c=n(839301),d=n(179302),m=n(522856),u=n(298178),p=n(16420),g=n(45697),h=n.n(g),f=n(667294),v=n(234544),b=n(418093),y=n(41601),x=n(847682),C=n(145764),E=n(94282),w=n(603561),P=n(785366),k=n(326727),I=n(816382),_=n(211413),S=n(278112),O=n(391036),T=n.n(O),A=n(516514);function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class L extends f.Component{constructor(e){super(e),D(this,"handleReplyClick",(()=>{var e;this.props.onReplyClick(this.props.comment.id,null===(e=this.props.comment.parent)||void 0===e?void 0:e.id)})),D(this,"handleLikeClick",(e=>{const{comment:t,currentUserIsCampaignOwner:n}=this.props;this.props.onLikeClick(t.id,e),n&&(null===this.state.optimisticIsLikedByCreator?this.setState({optimisticIsLikedByCreator:!t.currentUserVote}):this.setState((e=>({optimisticIsLikedByCreator:!e.optimisticIsLikedByCreator}))))})),D(this,"handleEditClick",(()=>{this.props.onEditClick(this.props.comment)})),D(this,"handleDeleteClick",(()=>{this.props.onDeleteClick(this.props.comment.id)})),D(this,"onClickUser",(()=>{this.props.onClickUser&&this.props.onClickUser(this.props.comment.commenter.id)})),D(this,"findPermissions",((e,t)=>{var n,i,o;const r={canEdit:!1,canDelete:!1};if(!this.props.currentUserId)return r;const a=!!e.deletedAt,l=this.props.currentUserCampaignId&&(null===(n=e.onBehalfOfCampaign)||void 0===n?void 0:n.id)===this.props.currentUserCampaignId,s=t.id===this.props.currentUserId,c=(null===(i=e.post)||void 0===i||null===(o=i.user)||void 0===o?void 0:o.id)===this.props.currentUserId;return r.canDelete=!a&&(l||s||c||this.props.currentUserIsCampaignOwner),r.canEdit=!a&&s||!a&&l,r})),D(this,"renderCommentAction",(e=>{let{onClick:t,label:n,icon:i}=e;return f.createElement(A.nQ,null,f.createElement(A.o5,{"aria-label":n,onClick:t},f.createElement(i,{title:n,size:o.J.Size.Xs,stroke:o.J.Stroke.Gray2})))})),D(this,"renderLikeAction",(e=>{let{likeCount:t,currentUserHasLiked:n,onLikeClick:o}=e;return f.createElement(A.nQ,null,f.createElement(x.Z,{likeCount:t||0,currentUserHasLiked:n,loading:!1,onLikeClick:o,likedName:(0,i.translate)(this.context,"comment",void 0,"Aria-label for comment.")}))})),D(this,"renderCommentActions",((e,t)=>{const n=this.findPermissions(e,t),{isSuspendedPostLockedForEditing:o}=this.props;return o?null:f.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.Center,display:r.x.Display.Flex,flexDirection:r.x.FlexDirection.Row,flexWrap:r.x.FlexWrap.NoWrap,justifyContent:r.x.JustifyContent.FlexStart,"data-tag":"comment-actions",height:"20px"},this.renderLikeAction({likeCount:e.voteSum,currentUserHasLiked:!!e.currentUserVote,onLikeClick:this.handleLikeClick}),this.renderCommentAction({icon:a._,label:(0,i.translate)(this.context,"Reply to this comment",void 0,"CTA to reply to a comment on a post."),onClick:this.handleReplyClick}),n.canEdit?this.renderCommentAction({icon:l.l,label:(0,i.translate)(this.context,"Edit comment",void 0,"Icon label to edit a post comment."),onClick:this.handleEditClick}):null,n.canDelete?this.renderCommentAction({icon:s.$,label:(0,i.translate)(this.context,"Delete comment",void 0,"Icon label to delete a post comment."),onClick:this.handleDeleteClick}):null,this.state.optimisticIsLikedByCreator?f.createElement("div",{"data-tag":"creator-endorsement-component"},f.createElement(y.Z,{campaignName:this.props.campaign.name,campaignAvatarPhotoUrl:this.props.campaign.avatarPhotoUrl,commentIsLikedByCreatorIconColor:this.props.commentIsLikedByCreatorIconColor})):null)})),this.state={placeholderNameWidth:`${(0,S.Z)(20,50)}%`,placeholderBodyWidth:`${(0,S.Z)(60,90)}%`,optimisticIsLikedByCreator:e.comment.isLikedByCreator,showAvatarShadow:!1}}componentDidUpdate(e){this.props.comment.isLikedByCreator!==e.comment.isLikedByCreator&&this.props.comment.isLikedByCreator!==this.state.optimisticIsLikedByCreator&&this.setState({optimisticIsLikedByCreator:this.props.comment.isLikedByCreator})}get shouldShowCampaignInfo(){var e,t;const{comment:n,campaignId:i,currentUserCampaignId:o}=this.props,r=(0,I.Z)(n.id);return(null==n?void 0:n.onBehalfOfCampaign)||i&&i===(null==n||null===(e=n.commenter)||void 0===e||null===(t=e.campaign)||void 0===t?void 0:t.id)||r&&i&&o&&i===o}render(){var e,t,n,i,o,a,l,s,g,h,b,x;const{campaignId:w,comment:P,placeholder:_,currentUserCampaignId:S}=this.props,{shouldShowCampaignInfo:O}=this,D=P.commenter||{},L=(0,I.Z)(P.id),z=null!=P&&P.onBehalfOfCampaign?{name:null==P||null===(e=P.onBehalfOfCampaign)||void 0===e?void 0:e.name,avatarPhotoUrl:null==P||null===(t=P.onBehalfOfCampaign)||void 0===t||null===(n=t.avatarPhotoImageUrls)||void 0===n?void 0:n.thumbnailSmall,url:null==P||null===(i=P.onBehalfOfCampaign)||void 0===i?void 0:i.url}:{name:null==P||null===(o=P.commenter)||void 0===o||null===(a=o.campaign)||void 0===a?void 0:a.name,avatarPhotoUrl:null==P||null===(l=P.commenter)||void 0===l||null===(s=l.campaign)||void 0===s||null===(g=s.avatarPhotoImageUrls)||void 0===g?void 0:g.thumbnailSmall,url:null==P||null===(h=P.commenter)||void 0===h||null===(b=h.campaign)||void 0===b?void 0:b.url},R=O?null==z?void 0:z.name:D.fullName,M=O?null==z?void 0:z.avatarPhotoUrl:D.imageUrl,U=O?null==z?void 0:z.url:null==P||null===(x=P.commenter)||void 0===x?void 0:x.url,j=!(!S||w!==S),N=f.createElement(r.x,{ml:2},f.createElement(c.T,{size:c.T.Size.Md,color:"dark"})),F=P.created?f.createElement(d.x,{color:d.x.Color.Gray2,size:d.x.Size.Sm},f.createElement(v.ZP,{date:P.created,formatter:(0,k.BK)(this.context)})):null,B=f.createElement(A.P5,{width:this.state.placeholderNameWidth}," "),V=f.createElement(A.P5,{width:this.state.placeholderBodyWidth}," ");return f.createElement(A.im,{"data-tag":"comment-row",isOptimistic:L},f.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.FlexStart,display:r.x.Display.Flex,flexDirection:r.x.FlexDirection.Row,flexWrap:r.x.FlexWrap.NoWrap,width:"100%",justifyContent:r.x.JustifyContent.FlexStart},_?f.createElement(A.fr,null):f.createElement(C.Z,{patronId:D.id,avatar:M,fullName:R,canViewPopover:j},f.createElement(r.x,{mr:2},f.createElement("a",{"data-tag":"comment-avatar-wrapper",onMouseEnter:()=>this.setState({showAvatarShadow:!0}),onMouseLeave:()=>this.setState({showAvatarShadow:!1}),href:U,onClick:this.onClickUser},f.createElement(m.Ct,{dot:!0,hideIfZero:!0,outline:!0,target:f.createElement("div",null,f.createElement(y.Y,{"data-tag":"comment-avatar-shadow",showAvatarShadow:this.state.showAvatarShadow}),f.createElement(u.q,{src:M,size:u.q.Size.Xs}))},P.isUnread?1:0)))),f.createElement("div",{style:{width:"100%",minWidth:0}},_?B:f.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.Center,display:r.x.Display.Flex,flexDirection:r.x.FlexDirection.Row,flexWrap:r.x.FlexWrap.NoWrap,justifyContent:r.x.JustifyContent.SpaceBetween},f.createElement(C.Z,{patronId:D.id,avatar:M,fullName:R,canViewPopover:j},f.createElement(p.A,{href:U,onClick:this.onClickUser,size:p.A.Size.Md,"data-tag":"commenter-name",underline:!1,weight:p.A.Weight.Bold,variant:p.A.Variant.Dark},R,f.createElement(E.Z,{campaignId:this.props.campaignId,flairs:D.flairs}))),f.createElement(A.Xx,null,L?N:F)),_?V:f.createElement(A.xG,{"data-tag":"comment-body",deleted:!!P.deletedAt},P.deletedAt?f.createElement(d.x,{font:d.x.Font.Body,size:d.x.Size.Md,el:d.x.Element.P},"deleted"):f.createElement(d.x,{font:d.x.Font.Body,size:d.x.Size.Md,el:d.x.Element.P},f.createElement("span",{dangerouslySetInnerHTML:{__html:T()(P.body,{allowedTags:[],allowedAttributes:{}})}}))),!_&&!L&&this.renderCommentActions(P,D))))}}D(L,"contextType",i.LocaleContext),D(L,"propTypes",{campaignId:h().string,campaign:h().object,currentUserId:h().string,currentUserCampaignId:h().string,comment:h().oneOfType([_.sv,h().shape({})]),commentIsLikedByCreatorIconColor:h().string,onClickUser:h().func,onDeleteClick:h().func,onEditClick:h().func,onLikeClick:h().func,onReplyClick:h().func,placeholder:h().bool,currentUserIsCampaignOwner:h().bool,isSuspendedPostLockedForEditing:h().bool}),D(L,"defaultProps",{comment:{},currentUserIsCampaignOwner:!1,onReplyClick:(e,t)=>{},onLikeClick:(e,t)=>{},onEditClick:e=>{},onDeleteClick:e=>{}});const z=(0,b.qC)((0,w.o)(P.d.EditComment))(L)},465973:(e,t,n)=>{n.d(t,{o:()=>y});var i=n(999007),o=n(819586),r=n(16420),a=n(398032),l=n(218659),s=n(768379),c=n(298178),d=n(825149),m=n(667294),u=n(116066),p=n(571995),g=n(692330),h=n(522675),f=n(81267),v=n(795213);const b=()=>{};function y(e){var t,n,y;let{onPostComment:x=b,onEditComment:C=b,onCancelClick:E=b,editingComment:w,canComment:P,parentCommentId:k,noHandling:I,campaign:_,isPreview:S,isSuspendedPostLockedForEditing:O,shouldAutoFocus:T=!1,triggerScrollToInput:A=!1}=e;const D=(0,g.b)(),[L,z]=(0,m.useState)(!0),[R,M]=(0,m.useState)(null!==(t=null==w?void 0:w.body)&&void 0!==t?t:""),U=(0,h.x)(),j=(0,m.useRef)(null),N=()=>!!k||!!w,F=()=>{if(0===R.length)return;const e=R.replace("<3","&lt;3");M(""),w?C(e,w.id):x(e,k)},B=()=>{M(""),E()};(0,m.useEffect)((()=>{var e;(k||w||T)&&(null===(e=j.current)||void 0===e||e.focus())}),[]),(0,m.useEffect)((()=>{var e;A&&j.current===document.activeElement&&(null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"}))}),[A]);const V={becomePatron:(0,i.translate)(D,"Become a patron to comment...",void 0,"Placeholder text for comment text field"),edit:(0,i.translate)(D,"Edit your comment...",void 0,"Placeholder text for comment text field"),reply:(0,i.translate)(D,"Write a reply...",void 0,"Placeholder text for comment text field"),joinConversation:(0,i.translate)(D,"Join the conversation...",void 0,"Placeholder text for comment text field"),upgrade:(0,i.translate)(D,"Upgrade your membership to comment...",void 0,"Placeholder text for post comments text field")};let W="";W=null==U||!U.id||I||P?w?V.edit:k?V.reply:V.joinConversation:null!=_&&_.currentUserIsFreeMember?V.upgrade:V.becomePatron;const Z=m.createElement(o.o,{size:"sm","data-tag":"comment-field",ref:j,multiline:!0,placeholder:W,value:R,onChange:e=>M(e.target.value),onFocus:()=>z(!0),onBlur:()=>z(!1),onKeyDown:e=>{switch(e.keyCode){case u.Z.ENTER:e.shiftKey?e.shiftKey=!1:(e.preventDefault(),F());break;case u.Z.ESC:N()&&(e.preventDefault(),B())}},disabled:!P||S,hideLabel:!0,label:(0,i.translate)(D,"Comment Field",void 0,"Accessibility label for text field to write a comment")}),H=m.createElement(r.A,{fluid:!0,href:(0,f.Z)("/login"),"data-tag":"login-field"},Z),q=(null==_?void 0:_.id)===(null==U||null===(n=U.campaign)||void 0===n?void 0:n.id)?null==_||null===(y=_.avatarPhotoImageUrls)||void 0===y?void 0:y.thumbnailSmall:null==U?void 0:U.imageUrl,G=w?m.createElement(a.z,{loggerId:"features-posts-CommentThread-CommentSend-post-comment",unfilled:!0,onClick:F,size:"sm"},m.createElement(p.PR,null)):m.createElement(a.z,{loggerId:"features-posts-CommentThread-CommentSend-post-comment",unfilled:!0,onClick:F,size:"sm"},m.createElement(p.um,null));return O?null:m.createElement(l.x,{flexDirection:l.x.FlexDirection.Column},m.createElement(v.GM,null,m.createElement(l.x,{flexShrink:0,pt:.5,mr:2,css:(0,s.i)(["align-self:start;"])},m.createElement(v.OR,null,m.createElement(l.x,null,m.createElement(c.q,{src:q,size:c.q.Size.Xs})))),m.createElement(v.i$,{isFocused:L},null!=U&&U.id&&!I?Z:H),!w&&!k&&R.length>0&&m.createElement(l.x,{ml:2,mb:2},m.createElement(a.z,{loggerId:"features-posts-CommentThread-CommentSend-post-comment",size:a.z.Size.Sm,variant:a.z.Variant.Primary,onClick:F},m.createElement(p.On,null)))),!(null==U||!U.id)&&N()&&m.createElement(l.x,{display:l.x.Display.Flex,flexDirection:l.x.FlexDirection.Row,justifyContent:l.x.JustifyContent.SpaceBetween,ml:6},m.createElement(l.x,null,m.createElement(a.z,{loggerId:"features-posts-CommentThread-CommentSend-cancel",unfilled:!0,onClick:B,size:"sm"},m.createElement(p.GX,null))),m.createElement(l.x,null,R.length>0&&G)),!w&&!k&&R.length>0&&m.createElement(l.x,{ml:6},m.createElement(d.A,{muted:!0},m.createElement("b",null,"Shift + Return/Enter")," to add a new line")))}},795213:(e,t,n)=>{n.d(t,{GM:()=>r,OR:()=>a,i$:()=>l});var i=n(768379),o=n(358475);const r=i.z.div.withConfig({componentId:"sc-nxuqem-0"})(["display:flex;flex-direction:row;justify-content:start;width:100%;align-items:end;"]),a=i.z.div.withConfig({componentId:"sc-nxuqem-1"})(["align-self:start;min-width:",";"],(e=>e.theme.units.getValue(4))),l=i.z.div.withConfig({componentId:"sc-nxuqem-2"})(["width:100%;",";"],o.SS)},462572:(e,t,n)=>{n.d(t,{x:()=>y});var i=n(999007),o=n(768379),r=n(623338),a=n(839301),l=n(285433),s=n(825149),c=n(667294),d=n(692330),m=n(480743),u=n(25784),p=n(175341),g=n(179433),h=n(465973);const f=o.z.div.withConfig({componentId:"sc-142iqzp-0"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:",";min-height:",";"],r.T.global.space16,r.T.global.space8),v=o.z.div.withConfig({componentId:"sc-142iqzp-1"})(["margin-top:",";margin-bottom:",";margin-left:",";"],r.T.global.space8,r.T.global.space8,r.T.global.space48),b=o.z.div.withConfig({componentId:"sc-142iqzp-2"})(["cursor:pointer;margin-bottom:",";min-height:",";"],r.T.global.space16,r.T.global.space8);function y(e){let{currentUser:t,campaign:n,campaignId:o,postCommentCount:r=0,comments:y,commentIsLikedByCreatorIconColor:x,noHandling:C,onLoadMoreComments:E,currentUserIsCampaignOwner:w,onLoadReplies:P,repliesLoading:k,onLikeClick:I,onPostComment:_,onEditComment:S,onDeleteComment:O,onClickUser:T,onEnterReplyMode:A,patreonUrl:D,loading:L,showCommentSend:z=!0,canComment:R,isSuspendedPostLockedForEditing:M,isPreview:U,focusCommentInput:j=!1}=e;(0,d.b)();const[N,F]=(0,c.useState)(null),[B,V]=(0,c.useState)(null),[W,Z]=(0,c.useState)(!1),H=e=>{var t;if(C)return;const n=t=>{let{id:n}=t;return n===e},i=null==y||null===(t=y.find((e=>{var t;return n(e)||!(null==e||null===(t=e.replies)||void 0===t||!t.find(n))})))||void 0===t?void 0:t.id;F(i||null),A&&A()},q=()=>{F(null),V(null)},G=e=>{C||V(e)},J=(e,t)=>{F(null),_&&_(e,t)},$=(e,t)=>{V(null),S&&S(e,t)},K=e=>{var i;return e?(null==B?void 0:B.id)===e.id?c.createElement(h.o,{noHandling:C,campaign:n,onEditComment:$,onCancelClick:q,editingComment:B,canComment:R,isPreview:U}):c.createElement(c.Fragment,{key:e.id},c.createElement(g.s,{campaign:n,campaignId:o,currentUserId:null==t?void 0:t.id,currentUserCampaignId:null==t||null===(i=t.campaign)||void 0===i?void 0:i.id,currentUserIsCampaignOwner:w,comment:e,commentIsLikedByCreatorIconColor:x,onReplyClick:H,onLikeClick:I,onEditClick:G,onDeleteClick:O,onClickUser:T,isSuspendedPostLockedForEditing:M})):null},X=y.reduce(((e,t)=>[...e,...t.replies||[]]),[...y]),Y=y.reduce(((e,t)=>{var n;return t.replyCount?e+Math.max(t.replyCount-((null==t||null===(n=t.replies)||void 0===n?void 0:n.length)||0),0):e}),0),Q=X.length+Y<r,ee=(0,m.m)(Math.min(2,r)).map((e=>c.createElement(c.Fragment,{key:e},c.createElement(g.s,{placeholder:!0})))),te=0===X.length&&r>0&&L,ne=y.map(((e,t)=>{var o,r;const s=((null==e?void 0:e.replyCount)||0)-((null==e||null===(o=e.replies)||void 0===o?void 0:o.length)||0),d=!(null==k||!k[e.id]),m=c.createElement(b,null,d?c.createElement(a.T,{size:a.T.Size.Md,color:"light"}):c.createElement(l.h,{loggerId:"features-posts-CommentThread-load",onClick:()=>{return t=e.id,void(C?(0,u.Z)({page:(0,p.Z)("/login",D)}):P&&P(t));var t}},"Load ",c.createElement(i.Plural,{one:"reply",other:"# replies",value:s})));return c.createElement(c.Fragment,{key:t},K(e),c.createElement(v,null,null!=e&&null!==(r=e.replies)&&void 0!==r&&r.length?e.replies.map(K):null,s>0?m:null,N&&e.id===N?c.createElement(h.o,{canComment:R,campaign:n,noHandling:C,onPostComment:J,onCancelClick:q,parentCommentId:N,isPreview:U}):null))})),ie=c.createElement(f,null,L?c.createElement(a.T,{size:"sm",color:"light"}):c.createElement(l.h,{loggerId:"loadMoreCommentsCta","data-tag":"loadMoreCommentsCta",onClick:()=>{C?(0,u.Z)({page:(0,p.Z)("/login",D)}):E&&E()},size:"md"},"Load more comments"),r>0&&c.createElement(s.A,{muted:!0,size:"md"},X.length," of ",r)),oe=W&&j&&R;return(0,c.useEffect)((()=>{L||W||Z(!0)}),[L,W]),c.createElement(c.Fragment,null,Q?ie:null,te?ee:ne,z&&c.createElement(h.o,{campaign:n,noHandling:C,onPostComment:J,onCancelClick:q,canComment:R,isSuspendedPostLockedForEditing:M,isPreview:U,shouldAutoFocus:j,triggerScrollToInput:oe}))}},404512:(e,t,n)=>{n.d(t,{A:()=>i});const i={postsOnTiers:"postsOnTiers",noTier:"noTier",blank:"blank"}},976203:(e,t,n)=>{n.d(t,{ZP:()=>Q});var i=n(999007),o=n(179302),r=n(218659),a=n(45697),l=n.n(a),s=n(667294),c=n(418093),d=n(313483),m=n(841347),u=n(558119),p=n(166130),g=n(392359),h=n(99524),f=n.n(h),v=n(441609),b=n.n(v),y=n(768379),x=n(627488),C=n(445511),E=n(398032);const w=y.z.a.withConfig({componentId:"sc-1bvvtq-0"})(["&:focus > div:first-child{",";}"],(e=>e.theme.buttons.getFocusStyles())),P=y.z.div.withConfig({componentId:"sc-1bvvtq-1"})(["position:absolute;top:0;bottom:0;left:0;right:0;",";"],(e=>`background-color: rgba(36, 30, 18, ${e.backgroundOpacity})`)),k=y.z.div.withConfig({componentId:"sc-1bvvtq-2"})(["opacity:0.8;"]),I=y.z.div.withConfig({componentId:"sc-y4rvpy-0"})(["display:flex;flex-direction:column;",""],(e=>e.isShifted?"position: absolute; top: 20%;":"justify-content: center")),_=function(e){let{text:t,buttonText:n,textProps:i,styles:a,backgroundOpacity:l=0,showCTAs:c=!0,isCtaShifted:d=!1}=e;const{buttonColor:m,iconColor:u,iconSize:p,buttonSize:g}=a;return s.createElement(P,{backgroundOpacity:l},s.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.Center,display:r.x.Display.Flex,flexDirection:r.x.FlexDirection.Column,flexWrap:r.x.FlexWrap.NoWrap,fluidWidth:!0,fluidHeight:!0,justifyContent:r.x.JustifyContent.SpaceAround,"data-tag":"locked-post-icon"},s.createElement(I,{isShifted:d},s.createElement(r.x,{display:r.x.Display.Flex,justifyContent:r.x.JustifyContent.Center,mb:1},s.createElement(k,null,s.createElement(C.e,{color:u,size:p,"data-tag":"lockedPostIcon"}))),t&&s.createElement(r.x,{mb:2,display:r.x.Display.Flex,justifyContent:r.x.JustifyContent.Center},s.createElement(o.x,i,t)),n&&c&&s.createElement(E.z,{loggerId:"features-posts-LockedPostBanner-LockedIcon",color:m,div:!0,size:g},n))))},S=(0,y.i)(["min-height:17rem;"]);function O(e){var t;let{media:n,textProps:i,styles:o,buttonText:a,text:l,height:c,images:d=[],isPostPreview:m=!1,isImageAlbumPreview:u=!1,showCTAs:p=!0}=e;const g=null==n?void 0:n.src,h=!g||b()(g)?null==n?void 0:n.imageSrc:g;let v=[];d.length>1?v=d.slice(0,8):b()(h)||(v=[{imageUrls:{default:h}}]);const y=h||"",C=!b()(v),E=v.length>1,w=E&&!u?.7:null,P=null===(t=(f().parse(y)||"").host)||void 0===t?void 0:t.includes("patreonusercontent.com");return s.createElement(r.x,{overflow:r.x.Overflow.Hidden,fluidWidth:!0,"data-tag":"locked-image-post",backgroundColor:!C&&r.x.BackgroundColor.Dark,css:!C&&S},C&&s.createElement(r.x,null,s.createElement(x.Z,{currentUserCanView:!1,images:v,height:c,darken:!u,darkenRadial:u,isPatreonServedContent:P,isPostPreview:m})),s.createElement(_,{text:l,buttonText:a,textProps:i,styles:o,backgroundOpacity:w,showCTAs:p,isCtaShifted:E&&u}))}O.propTypes={text:l().oneOfType([l().node,l().string,l().object]),buttonText:l().oneOfType([l().node,l().string,l().object]),textProps:l().object,styles:l().object,media:l().object,images:l().array,height:l().string,isPostPreview:l().bool,isImageAlbumPreview:l().bool,showCTAs:l().bool};const T=O;var A=n(77885),D=n(140085),L=n(498913),z=n.n(L);function R(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M=(0,y.i)(["opacity:0.11;"]);class U extends s.Component{renderFakeChoice(e){return s.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.Stretch,display:r.x.Display.Flex,mv:1,key:e},s.createElement(r.x,{p:1,backgroundColor:r.x.BackgroundColor.Gray3},s.createElement(A.A,{size:D.J.Size.Xs,color:D.J.Stroke.Light})),s.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.FlexStart,display:r.x.Display.Flex,flexGrow:2},s.createElement(r.x,{backgroundColor:r.x.BackgroundColor.Gray3,ml:1,fluidHeight:!0,fluidWidth:!0})))}render(){return s.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.Center,backgroundColor:r.x.BackgroundColor.Light,css:M,display:r.x.Display.Flex,fluidHeight:!0,fluidWidth:!0,justifyContent:r.x.JustifyContent.SpaceAround,ph:2},s.createElement(r.x,{fluidWidth:!0},z()(this.props.numberOfRows,(e=>this.renderFakeChoice(e)))))}}R(U,"propTypes",{numberOfRows:l().number}),R(U,"defaultProps",{numberOfRows:3});var j=n(186492),N=n.n(j);function F(e){const{contentTeaserText:t,teaserText:n}=e,i=n||`${t}...`;return s.createElement(o.x,{el:o.x.Element.P,color:o.x.Color.Light,weight:o.x.Weight.Bold,align:o.x.Align.Center,size:{xs:o.x.Size.Lg,sm:o.x.Size.Xl}},N().decode(i))}const B=(0,y.i)(["min-height:280px;"]);function V(e){let{url:t,textProps:n,styles:i,buttonText:o,text:a,contentTeaserText:l,teaserText:c,showCTAs:d}=e;return b()(l)&&b()(c)?s.createElement(r.x,{p:6,fluidWidth:!0,"data-tag":"locked-poll-post"},s.createElement(U,{numberOfRows:null==i?void 0:i.numberOfPollRows,patreonUrl:t,"data-tag":"locked-poll-background"}),s.createElement(_,{text:a,buttonText:o,textProps:n,styles:i,showCTAs:d})):s.createElement(r.x,{p:{xs:4,sm:10},fluidWidth:!0,display:r.x.Display.Flex,alignItems:r.x.AlignItems.Center,justifyContent:r.x.JustifyContent.Center,backgroundColor:r.x.BackgroundColor.Dark,"data-tag":"locked-poll-post",css:B},s.createElement(F,{teaserText:c,contentTeaserText:l}))}V.propTypes={contentTeaserText:l().string,teaserText:l().string,url:l().string,text:l().oneOfType([l().node,l().string,l().object]),buttonText:l().oneOfType([l().node,l().string,l().object]),textProps:l().object,styles:l().object,showCTAs:l().bool},V.defaultProps={showCTAs:!0};const W=V,Z=(0,y.i)(["min-height:280px;word-break:break-word;"]);function H(e){let{contentTeaserText:t,teaserText:n,isSinglePostPage:i,textProps:o,styles:a,buttonText:l,text:c,showCTAs:d}=e;const m=!b()(t)||!b()(n),u=i?10:8;return s.createElement(r.x,{p:{xs:4,sm:u},fluidWidth:!0,display:r.x.Display.Flex,alignItems:r.x.AlignItems.Center,justifyContent:r.x.JustifyContent.Center,backgroundColor:r.x.BackgroundColor.Dark,"data-tag":"locked-rich-text-post",css:Z},m?s.createElement(F,{teaserText:n,contentTeaserText:t}):s.createElement(_,{text:c,buttonText:l,textProps:o,styles:a,showCTAs:d}))}H.propTypes={contentTeaserText:l().string,teaserText:l().string,isSinglePostPage:l().bool,text:l().oneOfType([l().node,l().string,l().object]),buttonText:l().oneOfType([l().node,l().string,l().object]),textProps:l().object,styles:l().object,showCTAs:l().bool},H.defaultProps={contentTeaserText:"",isSinglePostPage:!1,showCTAs:!0};const q=H;var G=n(404512);const J=e=>{let{isContentDark:t,isSinglePostPage:n}=e;return{bannerHeight:n?"355px":"280px",buttonColor:"tertiaryInverse",buttonSize:n?"md":"sm",iconColor:t?"darkGray":"white",iconSize:n?"xl":"md",numberOfPollRows:n?5:3,textColor:t?"dark":"light",textSize:n?1:0}};var $,K;function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Q=(0,c.vl)((e=>{const{accessRules:t,currentUserPledge:n,postDisplayType:i,pageSource:o,lockedPostType:r}=e,a=i===p.mC.POLL,l=o===u.Eg,s=a;let c=r;c||(c=(0,g.Yp)({accessRules:t,currentUserPledge:n})?G.A.noTier:G.A.postsOnTiers);const d=(0,g.Ld)(t);return{isSinglePostPage:l,accessRules:t,minPostCents:d.patronAmountCents,minPostCentsCurrency:d.patronCurrency,isPostOnUnpublishedTier:(0,g.DB)(t),styles:J({isContentDark:s,isSinglePostPage:l}),lockedPostType:c}}))($=(0,c.xJ)("isMounted","setIsMounted",!1)((K=class extends s.Component{constructor(){super(...arguments),Y(this,"getButtonText",(()=>{const{accessRules:e,lockedPostType:t,isMonthly:n,minPostCents:i,minPostCentsCurrency:o,isPostOnUnpublishedTier:r,patronCurrency:a}=this.props;if(t===G.A.blank)return null;const l=(0,g.c3)(e),c=o||a;return t===G.A.postsOnTiers?(0,g.qq)(e)||r||l===m.U.minCentsPledged?s.createElement(s.Fragment,null,"Join now"):n?s.createElement(s.Fragment,null,"Join now for ",s.createElement(d.x,{value:i,currency:c})," per month"):s.createElement(s.Fragment,null,"Join now for ",s.createElement(d.x,{value:i,currency:c})," per creation"):t===G.A.noTier?s.createElement(s.Fragment,null,"Select a tier"):s.createElement(s.Fragment,null,"Unlock it now")})),Y(this,"getUnlockText",(()=>{const{lockedPostType:e,postDisplayType:t,minCentsPledgedToView:n}=this.props;if(e===G.A.blank)return null;const o=t?p.Hd[t]:(0,i.translate)(this.context,"post",void 0,"Default media name fallback if category not found.");return e===G.A.postsOnTiers?s.createElement(s.Fragment,null,"Unlock this ",o,s.createElement("br",null),"by becoming a patron"):e===G.A.noTier?s.createElement(s.Fragment,null,"Unlock this post by selecting",s.createElement("br",null),"a tier at no additional cost"):1===n?s.createElement(s.Fragment,null,o," for patrons only"):s.createElement(s.Fragment,null,o," for ",s.createElement(d.x,{value:n}),"+ patrons")})),Y(this,"renderLockedForPostType",(()=>{const{lockedPostType:e,media:t,postDisplayType:n,images:i,styles:r,url:a,contentTeaserText:l,teaserText:c,isSinglePostPage:d,isPostPreview:m,isImageAlbumPreview:u,showCTAs:g}=this.props,h=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({align:o.x.Align.Center,color:null==r?void 0:r.textColor,noMargin:!0,weight:o.x.Weight.Bold},e===G.A.minCentsPledged?{size:null==r?void 0:r.textSize,tracking:"wide",uppercase:!0}:[]),f={textProps:h,styles:r,images:i,buttonText:this.getButtonText(),text:this.getUnlockText(),height:null==r?void 0:r.bannerHeight,url:a,media:t,contentTeaserText:l,teaserText:c,isSinglePostPage:d,isPostPreview:m,isImageAlbumPreview:u,showCTAs:g};switch(n){case p.mC.POLL:return s.createElement(W,f);case p.mC.RICH_TEXT_ONLY:return s.createElement(q,f);default:return s.createElement(T,f)}}))}componentDidMount(){const{setIsMounted:e}=this.props;e(!0)}render(){const{showCTAs:e,url:t,onLockedPostClick:n,isMounted:i}=this.props,o=s.createElement(r.x,{alignContent:r.x.AlignContent.FlexStart,alignItems:r.x.AlignItems.Center,display:r.x.Display.Flex,flexDirection:r.x.FlexDirection.Row,flexWrap:r.x.FlexWrap.NoWrap,fluidHeight:!0,justifyContent:r.x.JustifyContent.Center},this.renderLockedForPostType());return i?s.createElement(r.x,{position:r.x.Position.Relative,fluidWidth:!0,fluidHeight:!0},e?s.createElement(w,{href:t,onClick:n},o):s.createElement(s.Fragment,null,o)):null}},Y(K,"contextType",i.LocaleContext),Y(K,"propTypes",{accessRules:l().array,creatorId:l().string,id:l().string,isMonthly:l().bool,images:l().array,media:l().shape({audio:l().shape({src:l().string}),embedHtml:l().string,image:l().shape({src:l().string}),imageSrc:l().string,src:l().string,thumbnailUrl:l().string,width:l().number}),minCentsPledgedToView:l().number,onLockedPostClick:l().func,pageSource:l().string,postDisplayType:l().oneOf(Object.keys(p.mC)).isRequired,title:l().string,url:l().string.isRequired,contentTeaserText:l().string,teaserText:l().string,isPostPreview:l().bool,isImageAlbumPreview:l().bool,isPoll:l().bool,isRichTextOnly:l().bool,isSinglePostPage:l().bool,minPostCents:l().number.isRequired,minPostCentsCurrency:l().string,isPostOnUnpublishedTier:l().bool,styles:l().object.isRequired,lockedPostType:l().oneOf(Object.keys(G.A)).isRequired,patronCurrency:l().string,showCTAs:l().bool,isMounted:l().bool,setIsMounted:l().func}),Y(K,"defaultProps",{payPerName:"creation",showCTAs:!0}),$=K))||$)||$}}]);
//# sourceMappingURL=9236.629436b7a0b83f5ffa32.js.map